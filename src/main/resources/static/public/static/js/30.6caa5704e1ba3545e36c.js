webpackJsonp([30],{fhZ9:function(e,t){},qyUT:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("Fd2+"),i=(s("wvM5"),s("QP/A"),s("cnGM"),s("FDxC"),s("jgNZ"),s("dKGA"),s("GKy3"),s("4T1P"),s("TIfe")),r=s("wDsp"),a={name:"mobile_login",components:{Row:o.u,Col:o.g,CellGroup:o.d,Cell:o.c,Field:o.j,Button:o.b,Toast:o.B,Notify:o.o},props:{},data:function(){return{username:"",password:"",verificationCode:"",loginDisable:!1}},watch:{},computed:{},methods:{inputFocusFn:function(e){this.$refs[e+"Border"].classList.add("focus")},inputBlurFn:function(e){this.$refs[e+"Border"].classList.remove("focus")},updateCodeFn:function(){for(var e="0123456789abcdefghijklmnopqrstuvwxyz",t="",s=0;s<4;s++)t+=e[parseInt(Math.random()*e.length)];this.$refs.verfication_view_code.innerText=t},handleLoginFn:function(){var e=this;if(this.username.trim())if(this.password.trim())if(this.verificationCode.trim())if(this.verificationCode.trim().toUpperCase()!==this.$refs.verfication_view_code.innerText.toUpperCase())this.$toast.fail("验证码错误！");else{var t={username:this.username.trim(),password:this.password.trim()};this.$axios.post(r.a.login,t).then(function(t){if(t.data.token){var s=t.data.token,o=t.data.user,r="",a="";Object(i.c)(s),e.$store.commit("setUser",o.username),e.$store.commit("setRole",o.role),e.$store.commit("setAddress",o.address),e.$store.commit("setRoutes",o.role,o.address);var n={department:o.department,applyDept:o.applyDept,isShowMac:o.isShowMac,isShowBuyDate:o.isShowBuyDate,isShowMoney:o.isShowMoney,isShowElectric:o.isShowElectric};switch(e.$store.commit("setQueryData",n),o.address){case"1":r="华西医院",a="/mobile/home";break;default:return}e.$store.commit("setProject",r),e.$router.addRoutes(e.$store.state.routes),e.$notify({type:"success",message:"登录成功！",duration:500}),e.loginDisable=!0,setTimeout(function(){e.$router.push({path:a})},500)}else t.data.message&&(e.$notify({type:"danger",message:t.data.message,duration:2e3}),e.updateCodeFn())}).catch(function(t){e.$notify({type:"danger",message:"登录错误！",duration:2e3}),e.updateCodeFn()})}else this.$toast.fail("请输入验证码！");else this.$toast.fail("请输入密码！");else this.$toast.fail("请输入账号！")}},created:function(){},mounted:function(){this.updateCodeFn()}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"custom_flex_column_wrap",attrs:{id:"mobile_login_wrap"}},[o("div",{staticClass:"login_logo_box custom_flex_column_item"},[o("Cell",[o("img",{attrs:{src:s("dLd/"),alt:""}}),e._v(" "),o("h2",[e._v("华西医疗资产管理系统")])])],1),e._v(" "),o("div",{staticClass:"login_form_box custom_flex_column_item"},[o("div",{staticClass:"login_form_item"},[o("CellGroup",{attrs:{border:!1}},[o("Field",{attrs:{border:!1,clearable:"",placeholder:"请输入用户名"},on:{focus:function(t){return e.inputFocusFn("userName")},blur:function(t){return e.inputBlurFn("userName")}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),o("div",{staticClass:"input_border_box"},[o("div",{ref:"userNameBorder",staticClass:"input_border_line"})])],1)],1),e._v(" "),o("div",{staticClass:"login_form_item"},[o("CellGroup",{attrs:{border:!1}},[o("Field",{attrs:{border:!1,clearable:"",type:"password",placeholder:"请输入密码"},on:{focus:function(t){return e.inputFocusFn("password")},blur:function(t){return e.inputBlurFn("password")}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),o("div",{staticClass:"input_border_box"},[o("div",{ref:"passwordBorder",staticClass:"input_border_line"})])],1)],1),e._v(" "),o("div",{staticClass:"login_form_item"},[o("CellGroup",{attrs:{border:!1}},[o("Row",[o("Col",{attrs:{span:"16"}},[o("Field",{attrs:{border:!1,clearable:"",placeholder:"请输入验证码"},on:{focus:function(t){return e.inputFocusFn("verificationCode")},blur:function(t){return e.inputBlurFn("verificationCode")}},model:{value:e.verificationCode,callback:function(t){e.verificationCode=t},expression:"verificationCode"}}),e._v(" "),o("div",{staticClass:"input_border_box"},[o("div",{ref:"verificationCodeBorder",staticClass:"input_border_line"})])],1),e._v(" "),o("Col",{attrs:{span:"8"}},[o("div",{staticClass:"verification_code_box"},[o("h3",{ref:"verfication_view_code",attrs:{onselectstart:"return false"},on:{click:e.updateCodeFn}})])])],1)],1)],1),e._v(" "),o("div",{staticClass:"login_form_item"},[o("CellGroup",{attrs:{border:!1}},[o("Cell",{attrs:{border:!1}},[o("Button",{staticClass:"submit_button",attrs:{disabled:e.loginDisable,round:"",color:"#1d50a2"},on:{click:e.handleLoginFn}},[e._v("登录")])],1)],1)],1)])])},staticRenderFns:[]};var l=s("VU/8")(a,n,!1,function(e){s("fhZ9")},null,null);t.default=l.exports}});