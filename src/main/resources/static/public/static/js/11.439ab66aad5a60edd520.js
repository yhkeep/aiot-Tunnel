webpackJsonp([11],{"4YdO":function(t,s){},"6nJB":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),i=e.n(a),o=e("Fd2+"),n=(e("jgNZ"),e("dKGA"),e("FDxC"),e("4T1P"),e("2PSJ"),e("uTM9"),e("9ULi"),e("jydU"),e("wDsp")),l={name:"assets_manage",components:{Button:o.b,Row:o.u,Col:o.g,Tag:o.A,Loading:o.m,Search:o.v,Icon:o.k},props:{},data:function(){return{isFirstEnter:!1,currentPage:1,totalCount:0,hasMore:!0,assetsDetailData:[],loadingShow:!0,searchName:""}},watch:{},computed:{assetsDetailDataNow:function(){var t=[];return this.assetsDetailData.forEach(function(s,e){var a={assetID:s.assetID,assetName:s.assetName};t.push(a)}),t}},methods:{toDetailFn:function(t,s){for(var e=0;e<this.assetsDetailData.length;e++)if(this.assetsDetailData[e].assetID===t.assetID){var a=JSON.parse(i()(this.assetsDetailData[e]));for(var o in a)"--"!==a[o]&&"null"!==a[o]||(a[o]="");window.sessionStorage.setItem("detailData",i()(a))}this.$router.push({path:"/mobile/assets_modify"})},toCreateFn:function(){this.$router.push({path:"/mobile/assets_create"})},searchFn:function(){this.currentPage=1,this.assetsDetailData=[],this.getDataFn()},getNowTime:function(){var t=new Date;return this.year=t.getFullYear(),this.month=t.getMonth()+1,this.date=t.getDate(),this.hour=t.getHours()<10?"0"+t.getHours():t.getHours(),this.minute=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),this.second=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds(),this.milliSeconds=t.getMilliseconds(),this.year+"-"+this.month+"-"+this.date+" "+this.hour+":"+this.minute+":"+this.second+"."+this.milliSeconds},getDataFn:function(){var t=this;this.loadingShow=!0;var s=this.getNowTime();console.log(s),this.$axios.post(n.a.assetsQuery+"?currentPage="+this.currentPage+"&assetName="+this.searchName).then(function(s){var e=s.data,a=e[e.length-1].timeTest;console.log(a);for(var i=Number(e.pop().total),o=0;o<e.length;o++){for(var n in e[o])""!==e[o][n]&&"null"!==e[o][n]||(e[o][n]="--");t.assetsDetailData.push(e[o])}i<=t.assetsDetailData.length?t.hasMore=!1:t.hasMore=!0,t.totalCount=i,t.loadingShow=!1}).catch(function(t){})},getMoreFn:function(){this.currentPage+=1,this.getDataFn()},initAllDataFn:function(){this.loadingKey=!0,this.currentPage=1,this.totalCount=0,this.hasMore=!0,this.assetsDetailData=[]}},beforeRouteEnter:function(t,s,e){"mobile_assets_modify"==s.name&&(s.meta.needFresh?t.meta.isBack=!1:t.meta.isBack=!0),e()},beforeRouteLeave:function(t,s,e){"mobile_assets_modify"===t.name?window.sessionStorage.setItem("mobileScroll",document.documentElement.scrollTop):(window.sessionStorage.getItem("mobileScroll")&&window.sessionStorage.removeItem("mobileScroll"),document.documentElement.scrollTop=0,document.body.scrollTop=0),e()},created:function(){this.isFirstEnter=!0},mounted:function(){},activated:function(){window.sessionStorage.getItem("mobileScroll")&&this.$nextTick(function(){document.documentElement.scrollTop=window.sessionStorage.getItem("mobileScroll")}),this.$route.meta.isBack&&!this.isFirstEnter||(this.initAllDataFn(),this.getDataFn()),this.$route.meta.isBack=!1,this.isFirstEnter=!1},deactivated:function(){},beforeDestroy:function(){this.$emit("setLoadingFn",!1)}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"mobile_assets_manage_wrap custom_flex_column_wrap"},[e("div",{staticClass:"tools_content"},[e("div",{staticClass:"tools_wrap custom_flex_row_wrap"},[e("div",{staticStyle:{flex:"7"}},[e("Search",{attrs:{placeholder:"请输入资产名称搜索"},model:{value:t.searchName,callback:function(s){t.searchName=s},expression:"searchName"}})],1),t._v(" "),e("div",{staticStyle:{flex:"2",padding:"10px 5px","text-align":"center"}},[e("Button",{staticClass:"tools_button",attrs:{type:"primary",round:"",size:"small"},on:{click:t.searchFn}},[t._v("搜索")])],1),t._v(" "),e("div",{staticStyle:{flex:"1",padding:"10px 0px","text-align":"center"}},[e("Icon",{staticStyle:{"margin-top":"1px"},attrs:{name:"plus"},on:{click:t.toCreateFn}})],1)])]),t._v(" "),e("div",{staticClass:"assets_table_wrap"},[e("ul",{staticClass:"assets_table_ul"},[e("li",{staticClass:"assets_table_li",staticStyle:{"text-align":"center"}},[e("Row",[e("Col",{attrs:{span:"3"}},[e("h4",{staticClass:"assets_table_item assets_table_item_index"},[t._v("序号")])]),t._v(" "),e("Col",{attrs:{span:"10"}},[e("h4",{staticClass:"assets_table_item"},[t._v("资产id")])]),t._v(" "),e("Col",{attrs:{span:"11"}},[e("h4",{staticClass:"assets_table_item"},[t._v("资产名称")])])],1)],1),t._v(" "),t._l(t.assetsDetailData,function(s,a){return e("li",{key:a,staticClass:"assets_table_li",on:{click:function(e){return t.toDetailFn(s,a)}}},[e("Row",[e("Col",{attrs:{span:"3"}},[e("span",{staticClass:"assets_table_item assets_table_item_index"},[t._v(t._s(a+1))])]),t._v(" "),e("Col",{attrs:{span:"10"}},[e("span",{staticClass:"assets_table_item"},[t._v(t._s(s.assetID))])]),t._v(" "),e("Col",{attrs:{span:"11"}},[e("span",{staticClass:"assets_table_item"},[t._v(t._s(s.assetName?s.assetName:"--"))])])],1)],1)})],2),t._v(" "),e("div",{staticClass:"loading_more_wrap"},[e("Button",{attrs:{disabled:!t.hasMore},on:{click:t.getMoreFn}},[t._v(t._s(!0===t.hasMore?"点击加载更多":"已无更多数据"))])],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loadingShow,expression:"loadingShow"}],staticClass:"loading_info_wrap"},[e("div",{staticClass:"loading_info_box"},[e("Loading",{attrs:{color:"#1989fa"}}),t._v(" "),e("p",[t._v("加载中...")])],1)])])},staticRenderFns:[]};var c=e("VU/8")(l,r,!1,function(t){e("4YdO")},"data-v-70a1d204",null);s.default=c.exports},"9ULi":function(t,s,e){e("XqYu"),e("s1Ps"),e("hSFT"),e("HZoF")},HZoF:function(t,s){}});