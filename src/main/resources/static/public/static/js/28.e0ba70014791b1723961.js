webpackJsonp([28],{"6nJB":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("mvHQ"),i=s.n(e),o=s("Fd2+"),n=(s("jgNZ"),s("dKGA"),s("FDxC"),s("2PSJ"),s("uTM9"),s("9ULi"),s("jydU"),s("wvM5"),s("tLo2"),s("Rv11"),s("wDsp")),l=s("ao6w"),r=s("eJLk"),c={name:"mobile_assets_manage",components:{Button:o.b,Row:o.v,Col:o.g,Tag:o.y,Loading:o.o,Search:o.w,Icon:o.m,Field:o.l,Popup:o.t,Picker:o.s},props:{},data:function(){return{inputData:[],inputDataAll:[],inputSearchValue:"",activeKey:"",showInputSearch:!1,statusColor:r.a,isFirstEnter:!0,currentPage:1,totalCount:0,hasMore:!0,assetsDetailData:[],loadingShow:!0,queryData:{assetID:"",assetName:"",memorydepart:"",memorylocDept:"",mac:"",status:""},value:"",showSearchPane:!1,statusDialogShow:!1,statusData:l.a}},watch:{},computed:{},methods:{showMoreMenuFn:function(){this.$emit("getMessage",!0)},openSearchPaneFn:function(){this.showSearchPane=!0},toDetailFn:function(t,a){this.$router.push({path:"/mobile/assets_detail/"+t.assetID})},toCreateFn:function(){this.$router.push({path:"/mobile/assets_create"})},searchFn:function(){this.currentPage=1,this.assetsDetailData=[],this.getDataFn(),this.showSearchPane=!1},clearAssetsFn:function(){for(var t in this.queryData)this.queryData[t]=""},getStatusFn:function(t){this.queryData.status=t.text,this.statusDialogShow=!1},certainSelectFn:function(t){"departmentroom"===this.activeKey?this.queryData.memorydepart=t:"locDept"===this.activeKey?this.queryData.memorylocDept=t:this.queryData[this.activeKey]=t,this.showInputSearch=!1,this.inputSearchValue="",this.activeKey=""},showInputSearchFn:function(t){this.showInputSearch=!0,this.activeKey=t,this.inputFocusFn(t)},handleSearchFn:function(t){this.inputData=this.inputDataAll.filter(function(a){return a.toLowerCase().indexOf(t.toLowerCase())>-1})},inputFocusFn:function(t){var a=this;this.inputDataAll=[],this.inputData=[];var s=[],e={};e[t]="1",s.push(e),this.$axios.post(n.a.inputQuery,s).then(function(s){s.data.data.forEach(function(s,e){a.inputDataAll.find(function(a){return a===s[t]})||a.inputDataAll.push(s[t])}),a.inputData=JSON.parse(i()(a.inputDataAll))}).catch(function(t){console.log(t)})},getDataFn:function(){var t=this;this.loadingShow=!0;var a="";for(var s in this.queryData)this.queryData[s]||(this.queryData[s]=""),a+=s+"="+this.queryData[s].trim()+"&";a=a.substring(0,a.length-1),this.$axios.post(n.a.assetsQuery+"?currentPage="+this.currentPage+"&"+a).then(function(a){for(var s=a.data,e=Number(s.pop().total),i=0;i<s.length;i++){for(var o in s[i])""!==s[i][o]&&"null"!==s[i][o]||(s[i][o]="--");t.assetsDetailData.push(s[i])}e<=t.assetsDetailData.length?t.hasMore=!1:t.hasMore=!0,t.totalCount=e,t.loadingShow=!1}).catch(function(t){})},getMoreFn:function(){this.currentPage+=1,this.getDataFn()},initAllDataFn:function(){this.loadingKey=!0,this.currentPage=1,this.totalCount=0,this.hasMore=!0,this.assetsDetailData=[],this.queryData={assetID:"",assetName:"",memorydepart:"",memorylocDept:"",mac:"",status:""}}},beforeRouteEnter:function(t,a,s){t.meta.isBack=!0,s()},beforeRouteLeave:function(t,a,s){var e=document.getElementById("mobile_wrap").scrollTop;window.sessionStorage.setItem("mobileScroll",e),s()},created:function(){this.isFirstEnter=!0},mounted:function(){},activated:function(){var t=window.sessionStorage.getItem("mobileScroll");document.getElementById("mobile_wrap").scrollTop=t,this.$route.meta.isBack&&!this.isFirstEnter||(this.initAllDataFn(),this.getDataFn()),this.$route.meta.isBack=!1,this.isFirstEnter=!1}},u={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"mobile_assets_manage_wrap manage_list_wrap custom_flex_column_wrap"},[s("div",{staticClass:"mobile_search_box"},[s("div",{staticClass:"mobile_search_box_left"},[s("Search",{attrs:{disabled:"",placeholder:"点击展开搜索面板",shape:"round"},on:{click:t.openSearchPaneFn},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}})],1),t._v(" "),s("div",{staticClass:"mobile_search_box_right"},[s("div",{staticClass:"mobile_search_box_right_tools",staticStyle:{width:"40px"}},[s("Icon",{attrs:{name:"add-o"},on:{click:t.toCreateFn}})],1),t._v(" "),s("div",{staticClass:"mobile_search_box_right_tools",staticStyle:{width:"40px"}},[s("Icon",{attrs:{name:"bars"},on:{click:t.showMoreMenuFn}})],1)])]),t._v(" "),s("div",{staticClass:"assets_table_wrap"},[s("div",{staticClass:"assets_table_wrap_content  clearfix"},[s("div",{staticClass:"assets_table_wrap_left"},[s("ul",{staticClass:"assets_table_ul"},[t._m(0),t._v(" "),t._l(t.assetsDetailData,function(a,e){return s("li",{key:e,staticClass:"assets_table_li"},[s("div",{staticClass:"assets_table_item"},[s("p",[t._v(t._s(e+1))])])])})],2)]),t._v(" "),s("div",{staticClass:"assets_table_wrap_right"},[s("ul",{staticClass:"assets_table_ul"},[t._m(1),t._v(" "),t._l(t.assetsDetailData,function(a,e){return s("li",{key:e,staticClass:"assets_table_li clearfix",on:{click:function(s){return t.toDetailFn(a,e)}}},[s("div",{staticClass:"assets_table_item"},[s("p",[t._v(t._s(a.assetID?a.assetID:"--"))])]),t._v(" "),s("div",{staticClass:"assets_table_item"},[s("p",[t._v(t._s(a.assetName?a.assetName:"--"))])]),t._v(" "),s("div",{staticClass:"assets_table_item"},[s("p",[t._v(t._s(a.locDept?a.locDept:"--"))])]),t._v(" "),s("div",{staticClass:"assets_table_item"},[s("p",[t._v(t._s(a.location?a.location:"--"))])]),t._v(" "),s("div",{staticClass:"assets_table_item"},[s("p",[t._v(t._s(a.mac?a.mac:"--"))])]),t._v(" "),s("div",{staticClass:"assets_table_item"},["正常"===a.status?s("Tag",{attrs:{size:"medium",color:t.statusColor[0]}},[t._v(t._s(a.status))]):"待维修"===a.status?s("Tag",{attrs:{size:"medium",color:t.statusColor[1]}},[t._v(t._s(a.status))]):"维修接单"===a.status?s("Tag",{attrs:{size:"medium",color:t.statusColor[2]}},[t._v(t._s(a.status))]):"待报废"===a.status?s("Tag",{attrs:{size:"medium",color:t.statusColor[3]}},[t._v(t._s(a.status))]):"报废"===a.status?s("Tag",{attrs:{size:"medium",color:t.statusColor[4]}},[t._v(t._s(a.status))]):"外借"===a.status?s("Tag",{attrs:{size:"medium",color:t.statusColor[5]}},[t._v(t._s(a.status))]):s("Tag",{attrs:{size:"medium",color:"#f7f7f7","text-color":"#515a6e"}},[t._v(t._s(a.status))])],1),t._v(" "),s("div",{staticClass:"assets_table_item"},[s("p",[t._v(t._s(a.sn?a.sn:"--"))])])])})],2)])]),t._v(" "),s("div",{staticClass:"loading_info_wrap"},[s("Button",{directives:[{name:"show",rawName:"v-show",value:!t.loadingShow,expression:"!loadingShow"}],staticStyle:{border:"none"},attrs:{disabled:!t.hasMore},on:{click:t.getMoreFn}},[t._v(t._s(!0===t.hasMore?"点击加载更多":"已无更多数据"))]),t._v(" "),s("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loadingShow,expression:"loadingShow"}],attrs:{size:"24px"}},[t._v("加载中...")])],1)]),t._v(" "),s("Popup",{attrs:{position:"top",round:""},model:{value:t.showSearchPane,callback:function(a){t.showSearchPane=a},expression:"showSearchPane"}},[s("div",{staticClass:"query_data_wrap"},[s("div",{staticClass:"query_data_box"},[s("Field",{attrs:{clearable:"",label:"资产编号",placeholder:"请输入要查询的资产编号"},model:{value:t.queryData.assetID,callback:function(a){t.$set(t.queryData,"assetID",a)},expression:"queryData.assetID"}}),t._v(" "),s("Field",{attrs:{clearable:"",label:"资产名称",center:"",placeholder:"请输入要查询的资产名称"},scopedSlots:t._u([{key:"button",fn:function(){return[s("Button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.showInputSearchFn("assetName")}}},[t._v("云数据")])]},proxy:!0}]),model:{value:t.queryData.assetName,callback:function(a){t.$set(t.queryData,"assetName",a)},expression:"queryData.assetName"}}),t._v(" "),s("Field",{attrs:{clearable:"",label:"部门名称",center:"",placeholder:"请输入要查询的部门名称"},scopedSlots:t._u([{key:"button",fn:function(){return[s("Button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.showInputSearchFn("departmentroom")}}},[t._v("云数据")])]},proxy:!0}]),model:{value:t.queryData.memorydepart,callback:function(a){t.$set(t.queryData,"memorydepart",a)},expression:"queryData.memorydepart"}}),t._v(" "),s("Field",{attrs:{clearable:"",label:"所在科室",center:"",placeholder:"请输入要查询的所在科室"},scopedSlots:t._u([{key:"button",fn:function(){return[s("Button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.showInputSearchFn("locDept")}}},[t._v("云数据")])]},proxy:!0}]),model:{value:t.queryData.memorylocDept,callback:function(a){t.$set(t.queryData,"memorylocDept",a)},expression:"queryData.memorylocDept"}}),t._v(" "),s("Field",{attrs:{clearable:"",label:"标签mac",placeholder:"请输入要查询的标签mac"},model:{value:t.queryData.mac,callback:function(a){t.$set(t.queryData,"mac",a)},expression:"queryData.mac"}}),t._v(" "),s("Field",{attrs:{disabled:"",label:"状态",placeholder:"请选择要查询的状态"},on:{click:function(a){t.statusDialogShow=!0}},model:{value:t.queryData.status,callback:function(a){t.$set(t.queryData,"status",a)},expression:"queryData.status"}})],1),t._v(" "),s("div",{staticClass:"tools_button_wrap"},[s("Button",{staticClass:"tools_button",attrs:{color:"linear-gradient(to right, #ff6034, #ee0a24)",round:""},on:{click:t.clearAssetsFn}},[t._v("清空")]),t._v(" "),s("Button",{staticClass:"tools_button",attrs:{color:"linear-gradient(to right, #69aff5, #1989fa)",round:""},on:{click:t.searchFn}},[t._v("搜索")])],1)])]),t._v(" "),s("Popup",{attrs:{position:"bottom"},model:{value:t.statusDialogShow,callback:function(a){t.statusDialogShow=a},expression:"statusDialogShow"}},[s("Picker",{attrs:{columns:t.statusData,"show-toolbar":"",title:"请选择状态","visible-item-count":5},on:{cancel:function(a){t.statusDialogShow=!1},confirm:t.getStatusFn}})],1),t._v(" "),s("Popup",{attrs:{position:"bottom"},model:{value:t.showInputSearch,callback:function(a){t.showInputSearch=a},expression:"showInputSearch"}},[s("Search",{attrs:{placeholder:"请输入搜索关键词","input-align":"center"},on:{input:t.handleSearchFn},model:{value:t.inputSearchValue,callback:function(a){t.inputSearchValue=a},expression:"inputSearchValue"}}),t._v(" "),s("Picker",{ref:"inputSelect",attrs:{"show-toolbar":"","toolbar-position":"bottom",columns:t.inputData,title:"","visible-item-count":5},on:{cancel:function(a){t.showInputSearch=!1},confirm:t.certainSelectFn}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"assets_table_li assets_table_li_name"},[a("div",{staticClass:"assets_table_item"},[a("p",[this._v("序号")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("li",{staticClass:"assets_table_li assets_table_li_name clearfix"},[s("div",{staticClass:"assets_table_item"},[s("p",[t._v("资产编号")])]),t._v(" "),s("div",{staticClass:"assets_table_item"},[s("p",[t._v("资产名称")])]),t._v(" "),s("div",{staticClass:"assets_table_item"},[s("p",[t._v("科室名称")])]),t._v(" "),s("div",{staticClass:"assets_table_item"},[s("p",[t._v("存放地点")])]),t._v(" "),s("div",{staticClass:"assets_table_item"},[s("p",[t._v("标签mac")])]),t._v(" "),s("div",{staticClass:"assets_table_item"},[s("p",[t._v("状态")])]),t._v(" "),s("div",{staticClass:"assets_table_item"},[s("p",[t._v("SN")])])])}]};var _=s("VU/8")(c,u,!1,function(t){s("oq4N")},"data-v-6658a206",null);a.default=_.exports},oq4N:function(t,a){}});