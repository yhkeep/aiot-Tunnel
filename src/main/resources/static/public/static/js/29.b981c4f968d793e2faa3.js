webpackJsonp([29],{E3DU:function(t,a){},jYNz:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("KxKW"),n=e("JtJ0"),o=e("HYs4"),i=e("X2sI"),r=e("LuSo"),c=e("9N2q"),l=e("NHTL"),d=e("yoLw"),h=e("EMb8"),u=e("NAz/"),_=e("a84E"),g=e("7+uW"),p=e("wDsp");g.a.component("Row",_.a),g.a.component("Col",u.a),g.a.component("Icon",h.a),g.a.component("Table",d.a),g.a.component("Tag",l.a),g.a.component("DatePicker",c.a),g.a.component("Select",r.a),g.a.component("Option",i.a),g.a.component("Page",o.a),g.a.component("Input",n.a),g.a.component("Button",s.a);var m={name:"damage_history",components:{},props:{},data:function(){return{assetID:"",tableLoading:!1,totalCount:0,pageSize:10,currentPage:1,foldArr:[!1],queryData:{timeStart:"",timeEnd:""},dateRangeArr:[],dateOpen:!1,showImg:!1,showImgData:"",historyDetailColumn:[{key:"handovertime",title:"记录时间"},{key:"handlingPeople",title:"负责人签名",slot:"handlingPeople"},{key:"buttingPeople",title:"交接人签名",slot:"buttingPeople"},{key:"handoverdepartment",title:"交接人部门"},{key:"estimatedtime",title:"预计归还时间（外借）"},{key:"remark",title:"备注"},{key:"assetstatustype",title:"类型",slot:"assetstatustype"}],historyDetailData:[]}},watch:{},computed:{},methods:{dateRangeFn:function(t){this.queryData.timeStart=t[0],this.queryData.timeEnd=t[1]},showImgFn:function(t){this.showImgData=t,this.showImg=!0},hideImgFn:function(){this.showImg=!1,this.showImgData=""},dateOpenChangeFn:function(t){t&&(this.dateOpen=!0)},dateOkFn:function(){this.dateOpen=!1},foldFn:function(t){this.$set(this.foldArr,t,!this.foldArr[t])},searchAssetsFn:function(){this.getDataFn()},clearAssetsFn:function(){this.dateOpen=!1,this.queryData.timeStart="",this.queryData.timeEnd="",this.dateRangeArr=[]},changePageFn:function(t){this.currentPage=t},getDataFn:function(){var t=this;this.tableLoading=!0,this.$axios.get(p.a.damageRegisterHistory+"?assetID="+this.assetID+"&timeStart="+this.queryData.timeStart+"&timeEnd="+this.queryData.timeEnd).then(function(a){"success"===a.data.msg&&(t.historyDetailData=a.data.data,t.tableLoading=!1)}).catch(function(t){console.log(t)})}},created:function(){var t=this;this.assetID=this.$route.params.id,this.assetID||(this.$Message.error({content:"未找到资产信息!",duration:2}),setTimeout(function(){t.$router.go(-1)},2e3))},mounted:function(){this.getDataFn()}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"damage_history_wrap"},[e("h1",{staticClass:"assets_title"},[t._v(t._s(t.assetID))]),t._v(" "),e("div",{class:t.foldArr[0]?"hover_animat custom_bg_color_white fold_wrap fold":"hover_animat custom_bg_color_white fold_wrap"},[e("div",{staticClass:"row_box"},[e("h2",{staticClass:"row_title"},[t._v("按条件筛选")]),t._v(" "),e("div",{staticClass:"fold_box"},[e("div",{staticClass:"form_wrap"},[e("div",{staticClass:"form_item"},[e("Row",{attrs:{gutter:20}},[e("Col",{attrs:{span:"6"}},[e("h3",[t._v("日期范围")]),t._v(" "),e("DatePicker",{staticStyle:{width:"100%"},attrs:{open:t.dateOpen,type:"datetimerange",placeholder:"选择日期范围"},on:{"on-open-change":t.dateOpenChangeFn,"on-ok":t.dateOkFn,"on-change":t.dateRangeFn},model:{value:t.dateRangeArr,callback:function(a){t.dateRangeArr=a},expression:"dateRangeArr"}})],1)],1)],1)]),t._v(" "),e("div",{staticClass:"submit_btn_wrap"},[e("Button",{attrs:{type:"primary",shape:"circle"},on:{click:t.searchAssetsFn}},[t._v("搜索")]),t._v(" "),e("Button",{attrs:{type:"error",shape:"circle"},on:{click:t.clearAssetsFn}},[t._v("清空")])],1)])]),t._v(" "),e("div",{staticClass:"fold_icon_wrap "},[e("div",{staticClass:"fold_icon_box",on:{click:function(a){return t.foldFn(0)}}},[t.foldArr[0]?e("Icon",{attrs:{type:"ios-arrow-down"}}):e("Icon",{attrs:{type:"ios-arrow-up"}})],1)])]),t._v(" "),e("div",{staticClass:"row_wrap hover_animat custom_bg_color_white"},[e("div",{staticClass:"row_box"},[e("h2",{staticClass:"row_title"},[t._v("维修/外借历史数据")]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"table_scroll_wrap"},[e("Table",{ref:"table",staticStyle:{"min-width":"1000px"},attrs:{stripe:"",columns:t.historyDetailColumn,data:t.historyDetailData,size:"large",loading:t.tableLoading},scopedSlots:t._u([{key:"handlingPeople",fn:function(a){var s=a.row;return[e("div",{staticClass:"damage_history_img"},[e("img",{attrs:{src:s.handlingPeople,alt:""},on:{click:function(a){return t.showImgFn(s.handlingPeople)}}})])]}},{key:"buttingPeople",fn:function(a){var s=a.row;return[e("div",{staticClass:"damage_history_img"},[e("img",{attrs:{src:s.buttingPeople,alt:""},on:{click:function(a){return t.showImgFn(s.buttingPeople)}}})])]}},{key:"assetstatustype",fn:function(a){var s=a.row;return["1"===s.assetstatustype?e("Tag",{attrs:{color:"warning"}},[t._v("维修登记")]):t._e(),t._v(" "),"2"===s.assetstatustype?e("Tag",{attrs:{color:"success"}},[t._v("维修完成")]):t._e(),t._v(" "),"3"===s.assetstatustype?e("Tag",{attrs:{color:"#9a66e4"}},[t._v("外借登记")]):t._e(),t._v(" "),"4"===s.assetstatustype?e("Tag",{attrs:{color:"primary"}},[t._v("外借归还")]):t._e()]}}])})],1),t._v(" "),e("div",{staticClass:"data_table_pagination_wrap"},[e("Page",{attrs:{"show-elevator":"","show-total":"",total:t.totalCount,current:t.currentPage,"page-size":t.pageSize},on:{"on-change":t.changePageFn}})],1)])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showImg,expression:"showImg"}],staticClass:"scale_img_wrap",on:{click:t.hideImgFn}},[e("img",{attrs:{src:t.showImgData,alt:""}})])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"data_table_top clearfix"},[a("div",{staticClass:"data_table_top_left"}),this._v(" "),a("div",{staticClass:"data_table_top_right"})])}]};var f=e("VU/8")(m,v,!1,function(t){e("E3DU")},"data-v-662a6ebe",null);a.default=f.exports}});