webpackJsonp([23],{DoYh:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("mvHQ"),n=e.n(o),s=e("bOdI"),i=e.n(s),l=e("9Xvl"),r={name:"iSwitch",mixins:[e("pEmh").a],props:{value:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:!1},size:{validator:function(t){return Object(l.m)(t,["large","small","default"])},default:function(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},name:{type:String},loading:{type:Boolean,default:!1},trueColor:{type:String},falseColor:{type:String},beforeChange:Function},data:function(){return{currentValue:this.value}},computed:{wrapClasses:function(){var t;return["ivu-switch",(t={},i()(t,"ivu-switch-checked",this.currentValue===this.trueValue),i()(t,"ivu-switch-disabled",this.disabled),i()(t,"ivu-switch-"+this.size,!!this.size),i()(t,"ivu-switch-loading",this.loading),t)]},wrapStyles:function(){var t={};return this.trueColor&&this.currentValue===this.trueValue?(t["border-color"]=this.trueColor,t["background-color"]=this.trueColor):this.falseColor&&this.currentValue===this.falseValue&&(t["border-color"]=this.falseColor,t["background-color"]=this.falseColor),t},innerClasses:function(){return"ivu-switch-inner"}},methods:{handleToggle:function(){var t=this.currentValue===this.trueValue?this.falseValue:this.trueValue;this.currentValue=t,this.$emit("input",t),this.$emit("on-change",t),this.dispatch("FormItem","on-form-change",t)},toggle:function(t){var a=this;if(t.preventDefault(),this.disabled||this.loading)return!1;if(!this.beforeChange)return this.handleToggle();var e=this.beforeChange();e&&e.then?e.then(function(){a.handleToggle()}):this.handleToggle()}},watch:{value:function(t){if(t!==this.trueValue&&t!==this.falseValue)throw"Value should be trueValue or falseValue.";this.currentValue=t}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{class:t.wrapClasses,style:t.wrapStyles,attrs:{tabindex:"0"},on:{click:t.toggle,keydown:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"space",32,a.key,[" ","Spacebar"])?null:t.toggle(a)}}},[e("input",{attrs:{type:"hidden",name:t.name},domProps:{value:t.currentValue}}),t._v(" "),e("span",{class:t.innerClasses},[t.currentValue===t.trueValue?t._t("open"):t._e(),t._v(" "),t.currentValue===t.falseValue?t._t("close"):t._e()],2)])},staticRenderFns:[]},u=e("VU/8")(r,c,!1,null,null,null).exports,p=e("wdqF"),v=e("bzvv"),h=e("8sRp"),f=e("KxKW"),g=e("JtJ0"),d=e("HYs4"),m=e("NHTL"),_=e("X2sI"),w=e("LuSo"),b=e("yoLw"),D=e("NAz/"),y=e("a84E"),C=e("EMb8"),k=e("7+uW"),S=e("wDsp");k.a.component("Icon",C.a),k.a.component("Row",y.a),k.a.component("Col",D.a),k.a.component("Table",b.a),k.a.component("Select",w.a),k.a.component("Option",_.a),k.a.component("Tag",m.a),k.a.component("Page",d.a),k.a.component("Input",g.a),k.a.component("Button",f.a),k.a.component("Modal",h.a),k.a.component("InputNumber",v.a),k.a.component("Spin",p.a),k.a.component("i-switch",u);var U={name:"gateway_setting",components:{},props:{},data:function(){return{whetherData:[{value:"YES",label:"是"},{value:"NO",label:"否"}],qosData:[{value:0,label:"0"},{value:1,label:"1"}],setAllKey:!0,configData:{disableLED:"NO",isLongBright:"NO",isUploadUnkown:"YES",isUploadIBeacon:"NO",isUploadS1:"NO",isUploadGateway:"YES",isauto:"",mUrl:"",qos:0,timeout:5,macReg:"",publishTopic:"",subscribeTopic:"",responseTopic:""},gatewayArr:[],macArr:[]}},watch:{},computed:{},methods:{switchChangeFn:function(t){this.macArr=[]},saveConfigFn:function(){var t=this;this.setAllKey||this.macArr.length?this.$Modal.confirm({title:"保存提示",okText:"确定",cancelText:"取消",content:'<h2 style="color:#f94040">你确定要保存当前配置吗？</h2>',onOk:function(){var a=[],e={gatewaymac:"",disableLED:t.configData.disableLED,isLongBright:t.configData.isLongBright,isUploadUnkown:t.configData.isUploadUnkown,isUploadIBeacon:t.configData.isUploadIBeacon,isUploadS1:t.configData.isUploadS1,isUploadGateway:t.configData.isUploadGateway,isauto:t.configData.isauto,mUrl:t.configData.mUrl.trim(),qos:t.configData.qos.toString(),timeout:t.configData.timeout.toString(),macReg:t.configData.macReg.trim()};t.setAllKey?t.gatewayArr.forEach(function(t,o){var s=JSON.parse(n()(e));s.gatewaymac=t.value.trim(),s.publishTopic=t.value.trim(),s.subscribeTopic=t.value.trim(),s.responseTopic=t.value.trim(),a.push(s)}):t.macArr.forEach(function(t,o){var s=JSON.parse(n()(e));s.gatewaymac=t.trim(),s.publishTopic=t.trim(),s.subscribeTopic=t.trim(),s.responseTopic=t.trim(),a.push(s)}),t.$axios.post(S.a.gatewayEdit,a).then(function(a){"success"===a.data.msg?setTimeout(function(){t.$Modal.success({title:"提示！",content:a.data.data})},500):setTimeout(function(){t.$Modal.error({title:"提示！",content:a.data.data})},500)}).catch(function(t){console.log(t)})}}):this.$Message.error({title:"提示！",content:"请选择您要设置的网关mac地址"})},getDataFn:function(){var t=this;this.gatewayArr=[],this.$axios.get(S.a.gatewayQuery+this.$store.state.address).then(function(a){a.data.forEach(function(a,e){if("{}"!==n()(a)&&""!==a.gatewaymac){var o={value:a.gatewaymac,label:a.gatewaymac};t.gatewayArr.push(o)}})}).catch(function(t){})}},created:function(){this.getDataFn()},mounted:function(){}},x={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"gateway_setting_wrap"},[e("div",{staticClass:"row_box shadow_box custom_bg_color_white"},[e("h2",{staticClass:"row_title"},[t._v("是否应用于所有网关")]),t._v(" "),e("div",{staticClass:"form_wrap"},[e("div",{staticClass:"form_item"},[e("Row",{attrs:{gutter:20}},[e("Col",{attrs:{span:"8"}},[e("i-switch",{on:{"on-change":t.switchChangeFn},model:{value:t.setAllKey,callback:function(a){t.setAllKey=a},expression:"setAllKey"}},[e("span",{attrs:{slot:"open"},slot:"open"},[t._v("是")]),t._v(" "),e("span",{attrs:{slot:"close"},slot:"close"},[t._v("否")])])],1)],1)],1),t._v(" "),!1===t.setAllKey?e("div",{staticClass:"form_item"},[e("Row",{attrs:{gutter:20}},[e("Col",{attrs:{span:"24"}},[e("h3",[t._v("选择要应用的网关mac地址")]),t._v(" "),e("Select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:t.macArr,callback:function(a){t.macArr=a},expression:"macArr"}},t._l(t.gatewayArr,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1)],1)],1):t._e()])]),t._v(" "),e("div",{staticClass:"row_wrap shadow_box custom_bg_color_white"},[e("div",{staticClass:"row_box"},[e("h2",{staticClass:"row_title"},[t._v("公共配置")]),t._v(" "),e("div",{staticClass:"form_wrap"},[e("div",{staticClass:"form_item"},[e("Row",{attrs:{gutter:20}},[e("Col",{attrs:{span:"8"}},[e("h3",[t._v("是否永远关闭彩灯（默认为否）")]),t._v(" "),e("Select",{model:{value:t.configData.disableLED,callback:function(a){t.$set(t.configData,"disableLED",a)},expression:"configData.disableLED"}},t._l(t.whetherData,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1),t._v(" "),e("Col",{attrs:{span:"8"}},[e("h3",[t._v("顶部彩灯是否长亮（默认为否）")]),t._v(" "),e("Select",{model:{value:t.configData.isLongBright,callback:function(a){t.$set(t.configData,"isLongBright",a)},expression:"configData.isLongBright"}},t._l(t.whetherData,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1),t._v(" "),e("Col",{attrs:{span:"8"}},[e("h3",[t._v("是否上传 Unknown类型的数据")]),t._v(" "),e("Select",{model:{value:t.configData.isUploadUnkown,callback:function(a){t.$set(t.configData,"isUploadUnkown",a)},expression:"configData.isUploadUnkown"}},t._l(t.whetherData,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1)],1)],1),t._v(" "),e("div",{staticClass:"form_item"},[e("Row",{attrs:{gutter:20}},[e("Col",{attrs:{span:"8"}},[e("h3",[t._v("是否上传ibeacon类型的数据（默认为否）")]),t._v(" "),e("Select",{model:{value:t.configData.isUploadIBeacon,callback:function(a){t.$set(t.configData,"isUploadIBeacon",a)},expression:"configData.isUploadIBeacon"}},t._l(t.whetherData,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1),t._v(" "),e("Col",{attrs:{span:"8"}},[e("h3",[t._v("是否上传S1类型的数据（默认为否）")]),t._v(" "),e("Select",{model:{value:t.configData.isUploadS1,callback:function(a){t.$set(t.configData,"isUploadS1",a)},expression:"configData.isUploadS1"}},t._l(t.whetherData,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1),t._v(" "),e("Col",{attrs:{span:"8"}},[e("h3",[t._v("是否上传网关数据（默认为是）")]),t._v(" "),e("Select",{model:{value:t.configData.isUploadGateway,callback:function(a){t.$set(t.configData,"isUploadGateway",a)},expression:"configData.isUploadGateway"}},t._l(t.whetherData,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1)],1)],1),t._v(" "),e("div",{staticClass:"form_item"},[e("Row",{attrs:{gutter:20}},[e("Col",{attrs:{span:"8"}},[e("h3",[t._v("断线自动重启")]),t._v(" "),e("Select",{model:{value:t.configData.isauto,callback:function(a){t.$set(t.configData,"isauto",a)},expression:"configData.isauto"}},t._l(t.whetherData,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1),t._v(" "),e("Col",{attrs:{span:"8"}},[e("h3",[t._v("重启监听时间（5 ~ 65 单位秒）")]),t._v(" "),e("InputNumber",{staticStyle:{width:"100%"},attrs:{max:65,min:5,step:1,placeholder:"5 ~ 65 "},model:{value:t.configData.timeout,callback:function(a){t.$set(t.configData,"timeout",a)},expression:"configData.timeout"}})],1),t._v(" "),e("Col",{attrs:{span:"8"}},[e("h3",[t._v("过滤mac（如：AC23）")]),t._v(" "),e("Input",{attrs:{placeholder:"过滤mac"},model:{value:t.configData.macReg,callback:function(a){t.$set(t.configData,"macReg",a)},expression:"configData.macReg"}})],1)],1)],1),t._v(" "),e("div",{staticClass:"form_item"},[e("Row",{attrs:{gutter:20}},[e("Col",{attrs:{span:"8"}},[e("h3",[t._v("上传服务器（如：192.168.0.117）")]),t._v(" "),e("Input",{attrs:{placeholder:"上传服务器url值"},model:{value:t.configData.mUrl,callback:function(a){t.$set(t.configData,"mUrl",a)},expression:"configData.mUrl"}})],1),t._v(" "),e("Col",{attrs:{span:"8"}},[e("h3",[t._v("QoS 等级（默认值0）")]),t._v(" "),e("Select",{model:{value:t.configData.qos,callback:function(a){t.$set(t.configData,"qos",a)},expression:"configData.qos"}},t._l(t.qosData,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1),t._v(" "),e("Col",{attrs:{span:"8"}},[e("h3",[t._v("提示")]),t._v(" "),e("p",{staticClass:"notice_text"},[t._v("QoS=0：最多一次，有可能重复或丢失。")]),t._v(" "),e("p",{staticClass:"notice_text"},[t._v("QoS=1：至少一次，有可能重复。")])])],1)],1),t._v(" "),e("div",{staticClass:"form_item"},[e("Row",{attrs:{gutter:20}})],1)])])]),t._v(" "),e("div",{staticClass:"row_wrap"},[e("Button",{attrs:{type:"primary",shape:"circle"},on:{click:t.saveConfigFn}},[t._v("保存配置")])],1)])},staticRenderFns:[]};var V=e("VU/8")(U,x,!1,function(t){e("RpRQ")},"data-v-5be63681",null);a.default=V.exports},RpRQ:function(t,a){}});