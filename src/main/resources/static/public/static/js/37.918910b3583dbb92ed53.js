webpackJsonp([37],{X6Mj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("mvHQ"),n=a.n(o),i=a("p8P9"),s=a("8sRp"),p=a("wdqF"),r=a("bzvv"),m=a("KxKW"),l=a("JtJ0"),c=a("X2sI"),u=a("LuSo"),v=a("NAz/"),h=a("a84E"),d=a("EMb8"),f=a("7+uW"),_=a("/WQG"),D=a("VPn5"),b=a("wDsp");f.a.component("Icon",d.a),f.a.component("Row",h.a),f.a.component("Col",v.a),f.a.component("Select",u.a),f.a.component("Option",c.a),f.a.component("Input",l.a),f.a.component("Button",m.a),f.a.component("InputNumber",r.a),f.a.component("Spin",p.a),f.a.component("Modal",s.a),f.a.component("AutoComplete",i.a);var y={name:"temp_edit",components:{},props:{},data:function(){return{locDept:"超级管理员"===this.$store.state.locDept?"":""===this.$store.state.locDept?"-":this.$store.state.locDept,mac:"",tempData:{freezernumber:"",freezername:"",department:"",location:"",mac:"",type:"",tempTop:0,tempBottom:0,humTop:0,humBottom:0,saveinterval:"10"},uploadModal:!1,achieveUpload:!1,errorUpload:!1,instrumentType:_.a,tempInterval:D.a,inputData:[],inputDataAll:[]}},watch:{},computed:{},methods:{handleSearchFn:function(t){this.inputData=this.inputDataAll.filter(function(e){return e.toLowerCase().indexOf(t.toLowerCase())>-1})},inputBlurFn:function(){this.inputDataAll=[],this.inputData=[]},inputFocusFn:function(t){var e=this;this.inputDataAll=[],this.inputData=[];var a=[],o={};o[t]="1",a.push(o),this.$axios.post(b.a.inputQuery,a).then(function(a){a.data.data.forEach(function(a,o){e.inputDataAll.find(function(e){return e===a[t]})||e.inputDataAll.push(a[t])}),setTimeout(function(){e.inputData=JSON.parse(n()(e.inputDataAll))},300)}).catch(function(t){console.log(t)})},successFn:function(){var t=this;this.achieveUpload=!0,setTimeout(function(){t.uploadModal=!1,setTimeout(function(){t.achieveUpload=!1,t.errorUpload=!1,t.$router.go(-1)},500)},1e3)},errorFn:function(){var t=this;this.errorUpload=!0,setTimeout(function(){t.uploadModal=!1,setTimeout(function(){t.achieveUpload=!1,t.errorUpload=!1},500)},1e3)},saveTempFn:function(){var t=this;if(this.tempData.freezernumber.trim()&&this.tempData.department.trim()&&this.tempData.freezername.trim()&&this.tempData.mac.trim()&&this.tempData.type.trim()){if(null!==this.tempData.tempBottom&&null!==this.tempData.tempTop){if(this.tempData.tempBottom===this.tempData.tempTop)return void this.$Modal.warning({title:"提示！",content:"温度上下限不能相等！"});if(this.tempData.tempBottom>this.tempData.tempTop)return void this.$Modal.warning({title:"提示！",content:"温度上限不能小于下限！"})}if(null!==this.tempData.humBottom&&null!==this.tempData.humTop){if(this.tempData.humBottom===this.tempData.humTop)return void this.$Modal.warning({title:"提示！",content:"湿度上下限不能相等！"});if(this.tempData.humBottom>this.tempData.humTop)return void this.$Modal.warning({title:"提示！",content:"湿度上限不能小于下限！"})}var e={freezernumber:this.tempData.freezernumber.trim(),freezername:this.tempData.freezername.trim(),department:this.tempData.department.trim(),type:this.tempData.type,location:this.tempData.location.trim(),temperaturefitted:this.tempData.tempBottom+"~"+this.tempData.tempTop,humidityfitted:this.tempData.humBottom+"~"+this.tempData.humTop,saveinterval:this.tempData.saveinterval},a="";for(var o in e)e[o]||(e[o]=""),a+=o+"="+e[o].trim()+"&";this.uploadModal=!0,this.$axios.get(b.a.tempEditUpdate+"?mac="+this.mac+"&"+a).then(function(e){0===e.data.code?t.successFn():t.errorFn()}).catch(function(e){t.errorFn()})}else this.$Message.error({content:"请补充完整信息!",duration:2})},tempRangeComFn:function(t,e){return t?"null"===t.split("~")[e]?null:Number(t.split("~")[e]):null},getDataFn:function(){var t=this;this.$Loading.start(),this.$axios.get(b.a.tempEditDetail+"?mac="+this.mac).then(function(e){var a=e.data[0];t.tempData={freezernumber:a.freezernumber?a.freezernumber:"",freezername:a.freezername,department:""!==t.locDept?t.locDept:a.department,location:a.location?a.location:"",mac:a.mac?a.mac:"",type:a.type?a.type:"",tempTop:t.tempRangeComFn(a.temperaturefitted,1),tempBottom:t.tempRangeComFn(a.temperaturefitted,0),humTop:t.tempRangeComFn(a.humidityfitted,1),humBottom:t.tempRangeComFn(a.humidityfitted,0),saveinterval:a.saveinterval?a.saveinterval:"10"},t.$Loading.finish()}).catch(function(e){t.$Loading.error()})}},created:function(){this.mac=this.$route.params.mac,this.getDataFn()},mounted:function(){}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"temp_edit_wrap"}},[a("div",{staticClass:"hover_animat custom_bg_color_white"},[a("div",{staticClass:"row_box"},[a("h2",{staticClass:"row_title"},[t._v("温湿度编辑")]),t._v(" "),a("div",{staticClass:"form_wrap"},[a("div",{staticClass:"form_item"},[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"6"}},[a("h3",[t._v("编号"),a("span",{staticClass:"must_fill_info"},[t._v("（必填）")])]),t._v(" "),a("Input",{attrs:{placeholder:"仪器编号"},model:{value:t.tempData.freezernumber,callback:function(e){t.$set(t.tempData,"freezernumber",e)},expression:"tempData.freezernumber"}})],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("h3",[t._v("名称"),a("span",{staticClass:"must_fill_info"},[t._v("（必填）")])]),t._v(" "),a("Input",{attrs:{placeholder:"请输入名称"},model:{value:t.tempData.freezername,callback:function(e){t.$set(t.tempData,"freezername",e)},expression:"tempData.freezername"}})],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("h3",[t._v("科室"),a("span",{staticClass:"must_fill_info"},[t._v("（必填）")])]),t._v(" "),a("AutoComplete",{attrs:{placeholder:"所在科室名称",disabled:""!==t.locDept},on:{"on-focus":function(e){return t.inputFocusFn("locDept")},"on-blur":t.inputBlurFn,"on-search":t.handleSearchFn},model:{value:t.tempData.department,callback:function(e){t.$set(t.tempData,"department",e)},expression:"tempData.department"}},t._l(t.inputData,function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("h3",[t._v("所在位置")]),t._v(" "),a("Input",{attrs:{placeholder:"所在位置"},model:{value:t.tempData.location,callback:function(e){t.$set(t.tempData,"location",e)},expression:"tempData.location"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"form_item"},[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"6"}},[a("h3",[t._v("mac地址"),a("span",{staticClass:"must_fill_info"},[t._v("（必填）")])]),t._v(" "),a("Input",{attrs:{disabled:"",placeholder:"mac地址"},model:{value:t.tempData.mac,callback:function(e){t.$set(t.tempData,"mac",e)},expression:"tempData.mac"}})],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("h3",[t._v("仪器类型"),a("span",{staticClass:"must_fill_info"},[t._v("（必填）")])]),t._v(" "),a("Select",{model:{value:t.tempData.type,callback:function(e){t.$set(t.tempData,"type",e)},expression:"tempData.type"}},t._l(t.instrumentType,function(e){return a("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.text))])}),1)],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("h3",[t._v("仪器记录时间间隔（分钟）"),a("span",{staticClass:"must_fill_info"},[t._v("（必填）")])]),t._v(" "),a("Select",{model:{value:t.tempData.saveinterval,callback:function(e){t.$set(t.tempData,"saveinterval",e)},expression:"tempData.saveinterval"}},t._l(t.tempInterval,function(e){return a("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.text))])}),1)],1)],1)],1),t._v(" "),a("div",{staticClass:"form_item"},[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"6"}},[a("h3",[t._v("温度上限（℃）")]),t._v(" "),a("InputNumber",{staticStyle:{width:"100%"},model:{value:t.tempData.tempTop,callback:function(e){t.$set(t.tempData,"tempTop",e)},expression:"tempData.tempTop"}})],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("h3",[t._v("温度下限（℃）")]),t._v(" "),a("InputNumber",{staticStyle:{width:"100%"},model:{value:t.tempData.tempBottom,callback:function(e){t.$set(t.tempData,"tempBottom",e)},expression:"tempData.tempBottom"}})],1),t._v(" "),a("Col",{directives:[{name:"show",rawName:"v-show",value:"GS1W"!==t.tempData.type,expression:"tempData.type!=='GS1W'"}],attrs:{span:"6"}},[a("h3",[t._v("湿度上限（%）")]),t._v(" "),a("InputNumber",{staticStyle:{width:"100%"},attrs:{max:100,min:0},model:{value:t.tempData.humTop,callback:function(e){t.$set(t.tempData,"humTop",e)},expression:"tempData.humTop"}})],1),t._v(" "),a("Col",{directives:[{name:"show",rawName:"v-show",value:"GS1W"!==t.tempData.type,expression:"tempData.type!=='GS1W'"}],attrs:{span:"6"}},[a("h3",[t._v("湿度下限（%）")]),t._v(" "),a("InputNumber",{staticStyle:{width:"100%"},attrs:{max:100,min:0},model:{value:t.tempData.humBottom,callback:function(e){t.$set(t.tempData,"humBottom",e)},expression:"tempData.humBottom"}})],1)],1)],1)]),t._v(" "),a("div",{staticClass:"submit_btn_wrap"},[a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:t.saveTempFn}},[t._v("保存")])],1)])]),t._v(" "),a("Modal",{attrs:{title:"","footer-hide":!0,"mask-closable":!1,closable:!1,width:"360"},model:{value:t.uploadModal,callback:function(e){t.uploadModal=e},expression:"uploadModal"}},[a("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[t.achieveUpload||t.errorUpload?t._e():a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"loding_icon",attrs:{type:"ios-loading",size:"18"}}),t._v(" "),a("div",[t._v("正在更新")])],1),t._v(" "),t.achieveUpload?a("Spin",{staticStyle:{color:"#00ad19"},attrs:{fix:""}},[a("Icon",{attrs:{type:"ios-checkmark-circle",size:"18"}}),t._v(" "),a("div",[t._v("更新成功")])],1):t._e(),t._v(" "),t.errorUpload?a("Spin",{staticStyle:{color:"#f72b2b"},attrs:{fix:""}},[a("Icon",{attrs:{type:"ios-close-circle",size:"18"}}),t._v(" "),a("div",[t._v("更新失败")])],1):t._e()],1)])],1)},staticRenderFns:[]};var w=a("VU/8")(y,C,!1,function(t){a("oc55")},"data-v-331bf848",null);e.default=w.exports},oc55:function(t,e){}});