webpackJsonp([9],{F5sp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Fd2+"),l=(a("FDxC"),a("4T1P"),a("2PSJ"),a("jydU"),a("wvM5"),a("MHRi"),a("Rv11"),a("tLo2"),a("GKy3"),a("uTM9"),a("poqm"),a("9ULi"),a("wDsp")),r=a("zcOu"),s=a("/WQG"),c=a("VPn5"),n={name:"mobile_temp_create",components:{Button:i.b,Tag:i.z,Icon:i.m,Field:i.l,Dialog:i.k,Picker:i.s,Popup:i.u,Toast:i.A,Loading:i.o,Stepper:i.y,Search:i.x},props:{},data:function(){return{typeDialogShow:!1,intervalDialogShow:!1,departmentDialogShow:!1,createData:{freezernumber:"",freezername:"",department:"",location:"",mac:"",type:"",tempTop:0,tempBottom:0,humTop:0,humBottom:0,saveinterval:"10"},instrumentType:s.a,tempInterval:c.a,departmentroomArr:[]}},watch:{},computed:{},methods:{getTypeFn:function(t){this.createData.type=t.key,this.typeDialogShow=!1,this.instrumentChangeFn(t.key)},getIntervalFn:function(t){this.createData.saveinterval=t.key,this.intervalDialogShow=!1},getDepartmentFn:function(t){this.createData.department=t.key,this.departmentDialogShow=!1},instrumentChangeFn:function(t){var e=this;this.instrumentType.forEach(function(a,i){if(a.key===t)for(var l in a.range)e.createData[l]=a.range[l]})},saveFn:function(){var t=this;if(this.createData.freezernumber.trim()&&this.createData.department.trim()&&this.createData.freezername.trim()&&this.createData.mac.trim()&&this.createData.type.trim()){if(null!==this.createData.tempBottom&&null!==this.createData.tempTop){if(this.createData.tempBottom===this.createData.tempTop)return void this.$notify({type:"warning",message:"温度上下限不能相等！",duration:2e3});if(this.createData.tempBottom>this.createData.tempTop)return void this.$notify({type:"warning",message:"温度上限不能小于下限！",duration:2e3})}if(null!==this.createData.humBottom&&null!==this.createData.humTop){if(this.createData.humBottom===this.createData.humTop)return void this.$notify({type:"warning",message:"湿度上下限不能相等！",duration:2e3});if(this.createData.humBottom>this.createData.humTop)return void this.$notify({type:"warning",message:"湿度上限不能小于下限！",duration:2e3})}var e=i.A.loading({message:"正在保存...",forbidClick:!0,duration:0}),a={freezernumber:this.createData.freezernumber.trim(),freezername:this.createData.freezername.trim(),department:this.createData.department.trim(),location:this.createData.location.trim(),mac:Object(r.a)(this.createData.mac.trim()),type:this.createData.type,temperaturefitted:this.createData.tempBottom+"~"+this.createData.tempTop,humidityfitted:this.createData.humBottom+"~"+this.createData.humTop,saveinterval:this.createData.saveinterval,address:1};this.$axios.post(l.a.tempCreate,a).then(function(a){0===a.data.code?(e.clear(),i.A.success("保存成功！"),setTimeout(function(){t.$router.go(-1)},2e3)):(e.clear(),i.A.fail("保存失败！"))}).catch(function(t){e.clear(),i.A.fail("保存失败！")})}else this.$notify({type:"warning",message:"请补充完整必填信息！",duration:2e3})}},created:function(){this.$emit("setTitle","温湿度仪器新增");var t=[];this.$store.state.departmentroom.split(",").forEach(function(e,a){t.push({key:e,text:e})}),this.departmentroomArr=t},mounted:function(){}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mobile_temp_create_wrap"},[a("div",{staticClass:"temp_create_box assets_upload_box"},[a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("Field",{attrs:{clearable:"",label:"仪器编号",required:"",placeholder:"请输入仪器编号"},model:{value:t.createData.freezernumber,callback:function(e){t.$set(t.createData,"freezernumber",e)},expression:"createData.freezernumber"}})],1)]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("Field",{attrs:{clearable:"",label:"仪器名称",required:"",placeholder:"请输入仪器名称"},model:{value:t.createData.freezername,callback:function(e){t.$set(t.createData,"freezername",e)},expression:"createData.freezername"}})],1)]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("Field",{attrs:{label:"部门名称",clearable:"",required:"",center:"",placeholder:"请输入部门名称"},scopedSlots:t._u([{key:"button",fn:function(){return[a("Button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.departmentDialogShow=!0}}},[t._v("云数据")])]},proxy:!0}]),model:{value:t.createData.department,callback:function(e){t.$set(t.createData,"department",e)},expression:"createData.department"}})],1)]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("Field",{attrs:{clearable:"",label:"所在位置",placeholder:"请输入所在位置"},model:{value:t.createData.location,callback:function(e){t.$set(t.createData,"location",e)},expression:"createData.location"}})],1)]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("Field",{attrs:{clearable:"",label:"mac地址",required:"",placeholder:"请输入mac地址"},model:{value:t.createData.mac,callback:function(e){t.$set(t.createData,"mac",e)},expression:"createData.mac"}})],1)]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("div",{on:{click:function(e){t.typeDialogShow=!0}}},[a("Field",{attrs:{label:"仪器类型",readonly:"",required:"",placeholder:"请选择仪器类型"},model:{value:t.createData.type,callback:function(e){t.$set(t.createData,"type",e)},expression:"createData.type"}})],1)])]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("div",{on:{click:function(e){t.intervalDialogShow=!0}}},[a("Field",{attrs:{label:"仪器记录时间间隔（分钟）",readonly:"",required:"",placeholder:"请选择仪器记录时间间隔"},model:{value:t.createData.saveinterval,callback:function(e){t.$set(t.createData,"saveinterval",e)},expression:"createData.saveinterval"}})],1)])]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("div",{staticClass:"van-cell van-field"},[t._m(0),t._v(" "),a("div",{staticClass:"van-cell__value"},[a("Stepper",{staticStyle:{"text-align":"left"},attrs:{integer:"",min:"-500",max:"500"},model:{value:t.createData.tempTop,callback:function(e){t.$set(t.createData,"tempTop",e)},expression:"createData.tempTop"}})],1)])])]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("div",{staticClass:"van-cell van-field"},[t._m(1),t._v(" "),a("div",{staticClass:"van-cell__value"},[a("Stepper",{staticStyle:{"text-align":"left"},attrs:{integer:"",min:"-500",max:"500"},model:{value:t.createData.tempBottom,callback:function(e){t.$set(t.createData,"tempBottom",e)},expression:"createData.tempBottom"}})],1)])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"GS1W"!==t.createData.type,expression:"createData.type!=='GS1W'"}],staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("div",{staticClass:"van-cell van-field"},[t._m(2),t._v(" "),a("div",{staticClass:"van-cell__value"},[a("Stepper",{staticStyle:{"text-align":"left"},attrs:{integer:"",min:"0",max:"100"},model:{value:t.createData.humTop,callback:function(e){t.$set(t.createData,"humTop",e)},expression:"createData.humTop"}})],1)])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"GS1W"!==t.createData.type,expression:"createData.type!=='GS1W'"}],staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("div",{staticClass:"van-cell van-field"},[t._m(3),t._v(" "),a("div",{staticClass:"van-cell__value"},[a("Stepper",{staticStyle:{"text-align":"left"},attrs:{integer:"",min:"0",max:"100"},model:{value:t.createData.humBottom,callback:function(e){t.$set(t.createData,"humBottom",e)},expression:"createData.humBottom"}})],1)])])]),t._v(" "),a("div",{staticClass:"tools_wrap"},[a("Button",{staticClass:"tools_button",attrs:{round:"",type:"primary"},on:{click:t.saveFn}},[t._v("保存")])],1)]),t._v(" "),a("Popup",{attrs:{position:"bottom"},model:{value:t.typeDialogShow,callback:function(e){t.typeDialogShow=e},expression:"typeDialogShow"}},[a("Picker",{attrs:{columns:t.instrumentType,"show-toolbar":"",title:"请选择仪器类型","visible-item-count":5},on:{cancel:function(e){t.typeDialogShow=!1},confirm:t.getTypeFn}})],1),t._v(" "),a("Popup",{attrs:{position:"bottom"},model:{value:t.intervalDialogShow,callback:function(e){t.intervalDialogShow=e},expression:"intervalDialogShow"}},[a("Picker",{attrs:{columns:t.tempInterval,"show-toolbar":"",title:"请选择间隔时间","visible-item-count":5},on:{cancel:function(e){t.intervalDialogShow=!1},confirm:t.getIntervalFn}})],1),t._v(" "),a("Popup",{attrs:{position:"bottom"},model:{value:t.departmentDialogShow,callback:function(e){t.departmentDialogShow=e},expression:"departmentDialogShow"}},[a("Picker",{attrs:{columns:t.departmentroomArr,"show-toolbar":"",title:"请选择部门","visible-item-count":5},on:{cancel:function(e){t.departmentDialogShow=!1},confirm:t.getDepartmentFn}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"van-cell__title van-field__label"},[e("span",[this._v("温度上限(℃)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"van-cell__title van-field__label"},[e("span",[this._v("温度下限(℃)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"van-cell__title van-field__label"},[e("span",[this._v("湿度上限(%)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"van-cell__title van-field__label"},[e("span",[this._v("湿度下限(%)")])])}]};var m=a("VU/8")(n,o,!1,function(t){a("acdN")},"data-v-acf05626",null);e.default=m.exports},acdN:function(t,e){},kYRV:function(t,e){},poqm:function(t,e,a){a("XqYu"),a("kYRV")}});