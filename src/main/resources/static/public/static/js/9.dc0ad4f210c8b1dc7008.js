webpackJsonp([9],{"9Cmf":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("EMb8"),i=e("NHTL"),n=e("yoLw"),o=e("7+uW"),c=e("Gaqz"),r=e("gUqX"),l=e("gyyF"),_=e("wDsp");e("TIfe");o.a.component("Table",n.a),o.a.component("Tag",i.a),o.a.component("Icon",s.a);var m={name:"home",components:{},props:{},data:function(){return{user:this.$store.state.user,deviceMessage:[],tableLoading:!0,summaryList:[{value:"--",text:"资产总额",unit:"元",color:"#2d8cf0",icon:"md-cube"},{value:"--",text:"资产总量",unit:"件",color:"#19be6b",icon:"ios-pie"},{value:"--",text:"维修接单",unit:"件",color:"#e46cbb",icon:"md-hammer"},{value:"--",text:"总盘点数",unit:"件",color:"#9a66e4",icon:"ios-contrast"}],newAssetsColumn:[{title:"资产编号",key:"assetID"},{title:"通用名称",key:"generalName"},{title:"资产名称",key:"assetName"},{title:"规格",key:"specification"},{title:"型号",key:"type"},{title:"存放地点",key:"location"},{title:"产地",key:"placeoforigin"},{title:"品牌",key:"brand"},{title:"部门编码",key:"departmentcode"},{title:"部门名称",key:"departmentroom"},{title:"大科室编码",key:"homeofficenumber"},{title:"大科室名称",key:"homeofficename"},{title:"是否进口",key:"isentrance"},{title:"供应商名称",key:"suppliername"},{title:"生产厂商名称",key:"generatebusinessname"},{title:"所在科室名称",key:"locDept"},{title:"状态",key:"status",slot:"status",width:120}],assetsConfigArr:["electric","generalName","assetName","location","specification","type","placeoforigin","brand","departmentcode","departmentroom","homeofficenumber","homeofficename","isentrance","suppliername","generatebusinessname","money","buyDate","locDept","status","recorder","mac","amount","unit","applyoddnumbers","oneclassify","secondclassify","threeclassify","fourclassify","repairPeople","repairDate","repairReason","scrapPeople","scrapDate","scrapReason","remark"],newAssetsData:[],damageChart:null,checkChart:null,damageData:[0,0,0,0],checkData:[0,0,0]}},watch:{isCollapsed:function(){var a=this;setTimeout(function(){a.damageChart.resize(),a.checkChart.resize()},500)},deviceMessageArr:function(){this.deviceMessage=this.deviceMessageArr}},computed:{isCollapsed:function(){return this.$store.state.isCollapsed},deviceMessageArr:function(){return this.$store.state.deviceMessageArr}},methods:{setAllOldFn:function(){this.damageChart=echarts.init(document.getElementById("damage_ratio_wrap"));var a=Math.round(this.damageData[0]/(this.damageData[0]+this.damageData[1]+this.damageData[2]+this.damageData[3])*100),t=Math.round(this.damageData[1]/(this.damageData[0]+this.damageData[1]+this.damageData[2]+this.damageData[3])*100),e=Math.round(this.damageData[2]/(this.damageData[0]+this.damageData[1]+this.damageData[2]+this.damageData[3])*100),s=100-(a+t+e);r.a.series[0].data=[{value:a,name:"正常"},{value:t,name:"维修接单"},{value:e,name:"待维修"},{value:s,name:"待处置"}],this.damageChart.setOption(r.a)},setCheckFn:function(){this.checkChart=echarts.init(document.getElementById("check_pie_wrap"));var a=Math.round(this.checkData[0]/(this.checkData[0]+this.checkData[1])*100),t=100-a;l.a.series[0].data=[{value:a,name:"今日已盘"},{value:t,name:"今日未盘"}],this.checkChart.setOption(l.a)},getDataFn:function(){var a=this;this.$Loading.start(),this.$axios.post(_.a.assetsQuery).then(function(t){for(var e=t.data,s=(Number(e.pop().total),function(t){var s=[];for(var i in e[t])""!==e[t][i]&&"null"!==e[t][i]||(e[t][i]="--"),s.push(i);a.assetsConfigArr.forEach(function(a,i){s.find(function(t,e){return t===a})||(e[t][a]="--")})}),i=0;i<e.length;i++)s(i);a.newAssetsData=e,a.$Loading.finish(),a.tableLoading=!1}).catch(function(t){a.$Loading.error()});this.user;this.$axios.post(_.a.assetsTotalNum).then(function(t){var e=t.data[0];"failed"===e.msg||(a.summaryList.forEach(function(a,t){switch(a.text){case"资产总额":a.value=e.aggregate;break;case"资产总量":a.value=e.examined+e.unexamined;break;case"维修接单":a.value=e.maintain;break;case"总盘点数":a.value=e.totalCheck?e.totalCheck:0;break;default:return}}),a.damageData=[e.normal,e.maintain,e.tobescrap,e.scrap],a.checkData=[e.examined,e.unexamined,e.totalCheck],a.setAllOldFn(),a.setCheckFn())}).catch(function(a){})},windowResizeFn:function(){var a=this;window.addEventListener("resize",function(){a.damageChart.resize(),a.checkChart.resize()})}},created:function(){},mounted:function(){var a=this;this.$nextTick(function(){Object(c.a)().then(function(){a.getDataFn(),a.windowResizeFn()})})},beforeDestroy:function(){this.$Loading.finish()}},d={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"home_wrap"},[e("div",{staticClass:"custom_flex_wrap total_data_wrap"},a._l(a.summaryList,function(t,s){return e("div",{key:s,staticClass:"total_data_item custom_flex_item_4 custom_bg_color_white hover_animat"},[e("div",{staticClass:"total_icon_box",style:"background-color:"+t.color},[e("Icon",{attrs:{type:t.icon}})],1),a._v(" "),e("div",{staticClass:"total_item_box"},[e("div",{staticClass:"total_item_box_top"},[a._v("\n                      "+a._s(t.value)+a._s(t.unit)+"\n                  ")]),a._v(" "),e("div",{staticClass:"total_item_box_bottom"},[a._v("\n                      "+a._s(t.text)+"\n                  ")])])])}),0),a._v(" "),e("div",{staticClass:"custom_flex_wrap row_wrap"},[e("div",{staticClass:"custom_flex_item_3_no hover_animat custom_bg_color_white row_box"},[e("h2",{staticClass:"row_title"},[a._v("设备动态")]),a._v(" "),e("div",{staticClass:"device_message_box"},[a.deviceMessage.length<=0?e("h3",[a._v("暂无动态...")]):e("div",{staticClass:"device_message_scroll_wrap"},[e("div",{staticClass:"device_message_scroll_box"},a._l(a.deviceMessage,function(t,s){return e("div",{key:s,staticClass:"device_message_item"},[e("div",{staticClass:"device_message_item_left"},[e("div",{staticClass:"device_message_icon_box"},[e("Icon",{attrs:{type:"ios-warning"}})],1)]),a._v(" "),e("div",{staticClass:"device_message_item_right"},[e("div",{staticClass:"device_message_item_right_top"},[e("span",[a._v(a._s(s+1)+" - ")]),e("span",[a._v(a._s("null"===t.brand?"--":t.brand))]),a._v(" "),e("b",{staticStyle:{color:"#e46cbb"}},[a._v(a._s("null"===t.assetName?"--":t.assetName))]),a._v(" "),e("span",[a._v(a._s("null"===t.type?"--":t.type))]),a._v(" - "),e("span",[a._v(a._s("null"===t.assetID?"--":t.assetID))]),a._v(" - "),e("span",[a._v("超出合法范围")])]),a._v(" "),e("div",{staticClass:"device_message_item_right_bottom"},[a._v("\n                                      最近更新时间："+a._s("null"===t.updatetime?"--":t.updatetime)+" / 房间名："+a._s("null"===t.cadMapRoomName?"--":t.cadMapRoomName)+"\n                                  ")])])])}),0)])])]),a._v(" "),e("div",{staticClass:"custom_flex_item_3_no hover_animat custom_bg_color_white row_box"},[e("h2",{staticClass:"row_title"},[a._v("维修处置")]),a._v(" "),e("div",{staticClass:"data_block",attrs:{id:"damage_ratio_wrap"}}),a._v(" "),e("div",{staticClass:"custom_flex_wrap"},[e("div",{staticClass:"damage_num_item"},[e("span",[a._v(a._s(a.damageData[0])+"件")])]),a._v(" "),e("div",{staticClass:"damage_num_item"},[e("span",[a._v(a._s(a.damageData[1])+"件")])]),a._v(" "),e("div",{staticClass:"damage_num_item"},[e("span",[a._v(a._s(a.damageData[2])+"件")])]),a._v(" "),e("div",{staticClass:"damage_num_item"},[e("span",[a._v(a._s(a.damageData[3])+"件")])])])]),a._v(" "),e("div",{staticClass:"custom_flex_item_3_no hover_animat custom_bg_color_white row_box"},[e("h2",{staticClass:"row_title"},[a._v("今日盘点")]),a._v(" "),e("div",{staticClass:"data_block",attrs:{id:"check_pie_wrap"}}),a._v(" "),e("div",{staticClass:"custom_flex_wrap"},[e("div",{staticClass:"check_num_item"},[e("span",[a._v(a._s(a.checkData[0])+"件")])]),a._v(" "),e("div",{staticClass:"check_num_item"},[e("span",[a._v(a._s(a.checkData[1])+"件")])])])])]),a._v(" "),e("div",{staticClass:"row_wrap hover_animat custom_bg_color_white"},[e("div",{staticClass:"row_box"},[e("h2",{staticClass:"row_title"},[a._v("新增资产列表")]),a._v(" "),e("div",{staticClass:"table_scroll_wrap"},[e("Table",{staticStyle:{"min-width":"1500px"},attrs:{stripe:"",columns:a.newAssetsColumn,data:a.newAssetsData,size:"large",loading:a.tableLoading},scopedSlots:a._u([{key:"status",fn:function(t){var s=t.row;return["正常"===s.status?e("Tag",{attrs:{color:"success"}},[e("span",[a._v(a._s(s.status))])]):"待维修"===s.status?e("Tag",{attrs:{color:"primary"}},[e("span",[a._v(a._s(s.status))])]):"维修接单"===s.status?e("Tag",{attrs:{color:"warning"}},[e("span",[a._v(a._s(s.status))])]):"待处置"===s.status?e("Tag",{attrs:{color:"error"}},[e("span",[a._v(a._s(s.status))])]):e("Tag",{attrs:{color:"default"}},[e("span",[a._v(a._s(s.status))])])]}}])})],1)])])])},staticRenderFns:[]};var u=e("VU/8")(m,d,!1,function(a){e("Honc")},"data-v-7f3108de",null);t.default=u.exports},Honc:function(a,t){},gUqX:function(a,t,e){"use strict";t.a={color:["#19be6b","#ddbd2b","#5060f0","#e46cbb"],legend:{show:!0,data:["正常","维修接单","待维修","待处置"]},series:[{name:"资产状态",type:"pie",radius:"55%",center:["50%","60%"],label:{normal:{formatter:"{c}%",textStyle:{fontSize:14}}},labelLine:{normal:{length:5,lineStyle:{}}},data:[{value:90,name:"正常"},{value:6,name:"维修接单"},{value:3,name:"待维修"},{value:1,name:"待处置"}]}]}},gyyF:function(a,t,e){"use strict";t.a={color:["#009688","#ddbd2b"],legend:{show:!0,data:["今日已盘","今日未盘"]},series:[{name:"资产盘点情况",type:"pie",radius:"55%",center:["50%","60%"],label:{normal:{formatter:"{c}%",textStyle:{fontSize:14}}},labelLine:{normal:{length:5,lineStyle:{}}},data:[{value:60,name:"今日已盘"},{value:40,name:"今日未盘"}]}]}}});