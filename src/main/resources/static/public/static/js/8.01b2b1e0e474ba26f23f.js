webpackJsonp([8],{F5sp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("bOdI"),l=a.n(i),c=a("mvHQ"),s=a.n(c),n=a("Fd2+"),r=(a("FDxC"),a("4T1P"),a("2PSJ"),a("jydU"),a("wvM5"),a("MHRi"),a("Rv11"),a("tLo2"),a("GKy3"),a("uTM9"),a("poqm"),a("9ULi"),a("wDsp")),o=a("zcOu"),u=a("/WQG"),m={name:"mobile_temp_create",components:{Button:n.b,Tag:n.y,Icon:n.m,Field:n.l,Dialog:n.k,Picker:n.s,Popup:n.t,Toast:n.z,Loading:n.o,Stepper:n.x,Search:n.w},props:{},data:function(){return{typeDialogShow:!1,createData:{freezernumber:"",freezername:"",department:"",location:"",mac:"",type:"",tempTop:null,tempBottom:null,humTop:null,humBottom:null},instrumentType:u.a,inputData:[],inputDataAll:[],inputSearchValue:"",activeKey:"",showInputSearch:!1}},watch:{},computed:{},methods:{getTypeFn:function(t){this.createData.type=t.key,this.typeDialogShow=!1},certainSelectFn:function(t){"locDept"===this.activeKey&&(this.createData.department=t),this.showInputSearch=!1,this.inputSearchValue="",this.activeKey=""},showInputSearchFn:function(t){this.showInputSearch=!0,this.activeKey=t,this.inputFocusFn(t)},handleSearchFn:function(t){this.inputData=this.inputDataAll.filter(function(e){return e.toLowerCase().indexOf(t.toLowerCase())>-1})},inputFocusFn:function(t){var e=this;this.inputDataAll=[],this.inputData=[];var a=[],i={};i[t]="1",a.push(i),this.$axios.post(r.a.inputQuery,a).then(function(a){a.data.data.forEach(function(a,i){e.inputDataAll.find(function(e){return e===a[t]})||e.inputDataAll.push(a[t])}),e.inputData=JSON.parse(s()(e.inputDataAll))}).catch(function(t){console.log(t)})},saveFn:function(){var t=this;if(this.createData.freezernumber.trim()&&this.createData.department.trim()&&this.createData.freezername.trim()&&this.createData.mac.trim()&&this.createData.type.trim()){var e;if(this.createData.tempBottom&&this.createData.tempTop){if(this.createData.tempBottom===this.createData.tempTop)return void this.$notify({type:"warning",message:"温度上下限不能相等！",duration:2e3});if(this.createData.tempBottom>this.createData.tempTop)return void this.$notify({type:"warning",message:"温度上限不能小于下限！",duration:2e3})}if(this.createData.humBottom&&this.createData.humTop){if(this.createData.humBottom===this.createData.humTop)return void this.$notify({type:"warning",message:"湿度上下限不能相等！",duration:2e3});if(this.createData.humBottom>this.createData.humTop)return void this.$notify({type:"warning",message:"湿度上限不能小于下限！",duration:2e3})}var a=n.z.loading({message:"正在保存...",forbidClick:!0,duration:0}),i=(e={freezernumber:this.createData.freezernumber.trim()},l()(e,"freezernumber",this.createData.freezernumber.trim()),l()(e,"department",this.createData.department.trim()),l()(e,"location",this.createData.location.trim()),l()(e,"mac",Object(o.a)(this.createData.mac.trim())),l()(e,"type",this.createData.type.trim()),l()(e,"tempTop",this.createData.tempTop),l()(e,"tempBottom",this.createData.tempBottom),l()(e,"humTop",this.createData.humTop),l()(e,"humBottom",this.createData.humBottom),e);this.$axios.post(r.a.tempCreate,i).then(function(e){0==e.data.code?(a.clear(),n.z.success("上传成功！"),setTimeout(function(){t.$router.go(-1)},2e3)):(a.clear(),n.z.fail("上传失败！"))}).catch(function(t){a.clear(),n.z.fail("上传失败！")})}else this.$notify({type:"warning",message:"请补充完整必填信息！",duration:2e3})}},created:function(){this.$emit("setTitle","温湿度仪器新增")},mounted:function(){}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mobile_temp_create_wrap"},[a("div",{staticClass:"temp_create_box assets_upload_box"},[a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("Field",{attrs:{clearable:"",label:"仪器编号",required:"",placeholder:"请输入仪器编号"},model:{value:t.createData.freezernumber,callback:function(e){t.$set(t.createData,"freezernumber",e)},expression:"createData.freezernumber"}})],1)]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("Field",{attrs:{clearable:"",label:"仪器名称",required:"",placeholder:"请输入仪器名称"},model:{value:t.createData.freezername,callback:function(e){t.$set(t.createData,"freezername",e)},expression:"createData.freezername"}})],1)]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("Field",{attrs:{label:"所在部门",clearable:"",required:"",center:"",placeholder:"请输入所在部门"},scopedSlots:t._u([{key:"button",fn:function(){return[a("Button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.showInputSearchFn("locDept")}}},[t._v("云数据")])]},proxy:!0}]),model:{value:t.createData.department,callback:function(e){t.$set(t.createData,"department",e)},expression:"createData.department"}})],1)]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("Field",{attrs:{clearable:"",label:"所在位置",placeholder:"请输入所在位置"},model:{value:t.createData.location,callback:function(e){t.$set(t.createData,"location",e)},expression:"createData.location"}})],1)]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("Field",{attrs:{clearable:"",label:"mac地址",required:"",placeholder:"请输入mac地址"},model:{value:t.createData.mac,callback:function(e){t.$set(t.createData,"mac",e)},expression:"createData.mac"}})],1)]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("div",{on:{click:function(e){t.typeDialogShow=!0}}},[a("Field",{attrs:{label:"仪器类型",disabled:"",required:"",placeholder:"请输入仪器类型"},model:{value:t.createData.type,callback:function(e){t.$set(t.createData,"type",e)},expression:"createData.type"}})],1)])]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("div",{staticClass:"van-cell van-field"},[t._m(0),t._v(" "),a("div",{staticClass:"van-cell__value"},[a("Stepper",{staticStyle:{"text-align":"left"},attrs:{integer:"",min:"-500",max:"500"},model:{value:t.createData.tempTop,callback:function(e){t.$set(t.createData,"tempTop",e)},expression:"createData.tempTop"}})],1)])])]),t._v(" "),a("div",{staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("div",{staticClass:"van-cell van-field"},[t._m(1),t._v(" "),a("div",{staticClass:"van-cell__value"},[a("Stepper",{staticStyle:{"text-align":"left"},attrs:{integer:"",min:"-500",max:"500"},model:{value:t.createData.tempBottom,callback:function(e){t.$set(t.createData,"tempBottom",e)},expression:"createData.tempBottom"}})],1)])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"GS1W"!==t.createData.type,expression:"createData.type!=='GS1W'"}],staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("div",{staticClass:"van-cell van-field"},[t._m(2),t._v(" "),a("div",{staticClass:"van-cell__value"},[a("Stepper",{staticStyle:{"text-align":"left"},attrs:{integer:"",min:"0",max:"100"},model:{value:t.createData.humTop,callback:function(e){t.$set(t.createData,"humTop",e)},expression:"createData.humTop"}})],1)])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"GS1W"!==t.createData.type,expression:"createData.type!=='GS1W'"}],staticClass:"cell_item"},[a("div",{staticClass:"cell_item_box"},[a("div",{staticClass:"van-cell van-field"},[t._m(3),t._v(" "),a("div",{staticClass:"van-cell__value"},[a("Stepper",{staticStyle:{"text-align":"left"},attrs:{integer:"",min:"0",max:"100"},model:{value:t.createData.humBottom,callback:function(e){t.$set(t.createData,"humBottom",e)},expression:"createData.humBottom"}})],1)])])]),t._v(" "),a("div",{staticClass:"tools_wrap"},[a("Button",{staticClass:"tools_button",attrs:{round:"",type:"primary"},on:{click:t.saveFn}},[t._v("保存")])],1)]),t._v(" "),a("Popup",{attrs:{position:"bottom"},model:{value:t.typeDialogShow,callback:function(e){t.typeDialogShow=e},expression:"typeDialogShow"}},[a("Picker",{attrs:{columns:t.instrumentType,"show-toolbar":"",title:"请选择类型","visible-item-count":5},on:{cancel:function(e){t.typeDialogShow=!1},confirm:t.getTypeFn}})],1),t._v(" "),a("Popup",{attrs:{position:"bottom"},model:{value:t.showInputSearch,callback:function(e){t.showInputSearch=e},expression:"showInputSearch"}},[a("Search",{attrs:{placeholder:"请输入搜索关键词","input-align":"center"},on:{input:t.handleSearchFn},model:{value:t.inputSearchValue,callback:function(e){t.inputSearchValue=e},expression:"inputSearchValue"}}),t._v(" "),a("Picker",{ref:"inputSelect",attrs:{"show-toolbar":"","toolbar-position":"bottom",columns:t.inputData,title:"","visible-item-count":5},on:{cancel:function(e){t.showInputSearch=!1},confirm:t.certainSelectFn}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"van-cell__title van-field__label"},[e("span",[this._v("温度上限(℃)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"van-cell__title van-field__label"},[e("span",[this._v("温度下限(℃)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"van-cell__title van-field__label"},[e("span",[this._v("湿度上限(%)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"van-cell__title van-field__label"},[e("span",[this._v("湿度下限(%)")])])}]};var h=a("VU/8")(m,p,!1,function(t){a("g/rT")},"data-v-1c14402e",null);e.default=h.exports},"g/rT":function(t,e){},kYRV:function(t,e){},poqm:function(t,e,a){a("XqYu"),a("kYRV")}});