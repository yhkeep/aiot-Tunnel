webpackJsonp([15],{"QP/A":function(e,t,s){s("XqYu")},W1gf:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("Fd2+"),i=(s("FDxC"),s("tLo2"),s("2PSJ"),s("QP/A"),s("cnGM"),s("xWT1")),n=s("wDsp"),a=s("TIfe"),r={name:"mobile_pane",components:{Popup:o.t,Button:o.b,Tag:o.y,CellGroup:o.d,Cell:o.c},props:{},data:function(){return{role:this.$store.state.role,user:this.$store.state.user,departmentroom:this.$store.state.departmentroom,routesData:this.$store.state.routes,moreMenuShow:!1,deviceMessage:[],deviceInfoNum:0,websock:null}},watch:{},computed:{},methods:{showMsg:function(e){this.moreMenuShow=e},logoutFn:function(){Object(i.a)()},toRouterFn:function(e){this.$router.push(e),this.moreMenuShow=!1},initWebSocket:function(){this.websock=new WebSocket(n.a.deviceMsgSocket+"/"+Object(a.a)()),this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},websocketonmessage:function(e){var t=[],s=e.data.split("{");s.splice(0,1),s.forEach(function(e,s){var o=e.split("}");o.splice(o.length-1,1);var i={};o[0].split(",").forEach(function(e,t){var s=e.split("=");i[s[0].trim()]=s[1]}),t.push(i)}),this.deviceInfoNum=t.length}},created:function(){this.initWebSocket()},mounted:function(){},beforeDestroy:function(){this.websock.close()}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"mobile_pane_wrap"},[o("div",{staticClass:"mobile_pane_box"},[o("keep-alive",[e.$route.meta.keepAlive?o("router-view",{on:{getMessage:e.showMsg}}):e._e()],1),e._v(" "),e.$route.meta.keepAlive?e._e():o("router-view",{on:{getMessage:e.showMsg}})],1),e._v(" "),o("Popup",{style:{width:"70%",height:"100%"},attrs:{position:"left"},model:{value:e.moreMenuShow,callback:function(t){e.moreMenuShow=t},expression:"moreMenuShow"}},[o("div",{staticClass:"mobile_side_wrap"},[o("div",{staticClass:"mobile_side_avatar"},[o("div",{staticClass:"mobile_side_avatar_left"},[o("img",{attrs:{src:s("izX0"),alt:""}})]),e._v(" "),o("div",{staticClass:"mobile_side_avatar_center"},[o("h2",[e._v(e._s(e.user))]),e._v(" "),o("p",[e._v(e._s(e.departmentroom))])]),e._v(" "),o("div",{staticClass:"mobile_side_avatar_right"},[o("Tag",{attrs:{type:"admin"===e.role?"success":"warning"}},[e._v(e._s("admin"===e.role?"管理员":"操作员"))])],1)]),e._v(" "),o("div",[e._l(e.routesData[2].children[0].children,function(t,s){return o("Cell",{key:s,staticClass:"mobile_side_menu_cell",attrs:{icon:t.meta.icon,title:t.meta.title,"is-link":""},on:{click:function(s){return e.toRouterFn(t.path)}},scopedSlots:e._u(["mobile_device_message"===t.name?{key:"title",fn:function(){return[o("span",{staticClass:"custom-title"},[e._v("设备动态")]),e._v(" "),o("Tag",{staticStyle:{transform:"translateY(-1px)","margin-left":"10px"},attrs:{type:"0"==e.deviceInfoNum?"success":"danger",round:""}},[e._v(e._s(e.deviceInfoNum))])]},proxy:!0}:null],null,!0)})}),e._v(" "),o("Cell",{staticClass:"mobile_side_menu_cell logout_btn",attrs:{icon:"close","is-link":"",title:"退出"},on:{click:e.logoutFn}})],2)])])],1)},staticRenderFns:[]};var l=s("VU/8")(r,c,!1,function(e){s("jGMq")},"data-v-454ae163",null);t.default=l.exports},jGMq:function(e,t){}});