webpackJsonp([29],{oit7:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("wDsp"),n=t("TIfe"),c={name:"device_message_wrap",components:{},data:function(){return{deviceMessage:[],websock:null}},watch:{},computed:{},methods:{initWebSocket:function(){this.websock=new WebSocket(a.a.deviceMsgSocket+"/"+Object(n.a)()),this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},websocketonmessage:function(e){var s=[],t=e.data.split("{");t.splice(0,1),t.forEach(function(e,t){var a=e.split("}");a.splice(a.length-1,1);var n={};a[0].split(",").forEach(function(e,s){var t=e.split("=");n[t[0].trim()]=t[1]}),s.push(n)}),this.deviceMessage=s}},created:function(){this.initWebSocket()},mounted:function(){},beforeDestroy:function(){this.websock.close()}},o={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"mobile_device_message_wrap"}},[t("div",{staticClass:"device_message_box"},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.deviceMessage.length,expression:"!deviceMessage.length"}],staticClass:"device_message_notice"},[t("span",[e._v("暂无设备异常！")])]),e._v(" "),t("ul",{directives:[{name:"show",rawName:"v-show",value:e.deviceMessage.length,expression:"deviceMessage.length"}],staticClass:"device_message_ul"},e._l(e.deviceMessage,function(s,a){return t("li",{staticClass:"device_message_item"},[t("p",[t("span",[e._v(e._s(a+1)+" . ")]),t("span",[e._v(e._s("null"===s.brand?"--":s.brand))]),e._v(" - "),t("span",{class:s.locDept!==s.department&&s.department?"device_message_color_2":"device_message_color_1"},[e._v(e._s("null"===s.assetName?"--":s.assetName))]),e._v(" - "),t("span",[e._v(e._s("null"===s.type?"--":s.type))])]),e._v(" "),t("div",[t("span",[e._v(e._s(s.locDept!==s.department&&s.department?"超出电子围栏范围":"丢失信号"))]),e._v(" "),t("p",[e._v("资产编号："+e._s("null"===s.assetID?"--":s.assetID))]),e._v(" "),t("p",[e._v("最近更新时间："+e._s("null"===s.updatetime?"--":s.updatetime)+" / 房间名："+e._s("null"===s.cadMapRoomName?"--":s.cadMapRoomName))]),e._v(" "),t("p",[e._v("所属科室："+e._s("null"===s.locDept?"--":s.locDept)+" / 实时所属科室："+e._s("null"===s.department?"--":s.department))])])])}),0)])])},staticRenderFns:[]};var i=t("VU/8")(c,o,!1,function(e){t("rM28")},"data-v-479028b1",null);s.default=i.exports},rM28:function(e,s){}});