webpackJsonp([14],{LjVW:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("KxKW"),i=s("JtJ0"),r=s("7+uW"),a=s("TIfe"),n=s("wDsp");r.a.component("Input",i.a),r.a.component("Button",o.a);var c={name:"login",components:{},props:{},data:function(){return{account:"",password:"",verification:"",loginDisable:!1,loginBg:s("npKG")}},watch:{},computed:{loginImg:function(){return"background-image:url('"+this.loginBg+"')"}},methods:{inputBlurFn:function(e){var t={accountMsg:"账号不能为空",passwordMsg:"密码不能为空",verificationMsg:"验证码不正确"};"verification"===e?this[e].trim().toUpperCase()!==this.$refs.verfication_view_code.innerText.toUpperCase()?(this.$refs[e+"Error"].classList.add("show"),this.$refs[e+"Error"].innerText=t[e+"Msg"]):(this.$refs[e+"Error"].classList.remove("show"),this.$refs[e+"Error"].innerText=""):""===this[e].trim()?(this.$refs[e+"Error"].classList.add("show"),this.$refs[e+"Error"].innerText=t[e+"Msg"]):(this.$refs[e+"Error"].classList.remove("show"),this.$refs[e+"Error"].innerText="")},updateCodeFn:function(){for(var e="0123456789abcdefghijklmnopqrstuvwxyz",t="",s=0;s<4;s++)t+=e[parseInt(Math.random()*e.length)];this.$refs.verfication_view_code.innerText=t},handleLoginFn:function(){var e=this;if(this.inputBlurFn("account"),this.inputBlurFn("password"),this.inputBlurFn("verification"),this.account.trim()&&this.password.trim()&&this.verification.trim()&&this.verification.trim()&&this.verification.trim().toUpperCase()===this.$refs.verfication_view_code.innerText.toUpperCase()){var t={username:this.account.trim(),password:this.password.trim()};this.$axios.post(n.a.login,t).then(function(t){if(t.data.token){var s=t.data.token,o=t.data.user,i="",r="";Object(a.c)(s),e.$store.commit("setUser",o.username),e.$store.commit("setRole",o.role),e.$store.commit("setDepartmentroom",o.departmentroom?o.departmentroom:""),e.$store.commit("setLocDept",o.locDept?o.locDept:""),e.$store.commit("setAddress",o.address),e.$store.commit("setRoutes",o.role,o.address);var n={memorylocDept:o.memorylocDept,memorydepart:o.memorydepart,memoryoneclassify:o.memoryoneclassify,memorysecondclassify:o.memorysecondclassify,memorythreeclassify:o.memorythreeclassify,memoryfourclassify:o.memoryfourclassify},c={isShowMac:o.isShowMac,isShowBuyDate:o.isShowBuyDate,isShowMoney:o.isShowMoney,isShowElectric:o.isShowElectric,isShowSpecification:o.isShowSpecification,isShowType:o.isShowType,isShowLocation:o.isShowLocation,isShowPlaceoforigin:o.isShowPlaceoforigin,isShowBrand:o.isShowBrand,isShowDepartmentcode:o.isShowDepartmentcode,isShowDepartmentroom:o.isShowDepartmentroom,isShowHomeofficenumber:o.isShowHomeofficenumber,isShowHomeofficename:o.isShowHomeofficename,isShowIsentrance:o.isShowIsentrance,isShowSuppliername:o.isShowSuppliername,isShowGeneratebusinessname:o.isShowGeneratebusinessname,isShowApplyoddnumbers:o.isShowApplyoddnumbers,isShowLocDept:o.isShowLocDept,isShowStatus:o.isShowStatus};switch(e.$store.commit("setQueryData",n),e.$store.commit("setChooseData",c),o.address){case"1":i="华西医院",r="web/home";break;default:return}e.$store.commit("setProject",i),e.$router.addRoutes(e.$store.state.routes),e.$Message.success({content:"登录成功!",duration:.5}),e.loginDisable=!0,setTimeout(function(){e.$router.push({path:r})},500)}else t.data.message&&(e.$Message.error({content:t.data.message,duration:2}),e.updateCodeFn())}).catch(function(t){e.$Message.error({content:"登录错误！",duration:2}),e.updateCodeFn()})}else this.$Message.error({content:"请正确填写完必要信息！",duration:2})}},created:function(){},mounted:function(){this.updateCodeFn()}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login_wrap"},[e._m(0),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"content_box"},[s("div",{staticClass:"img_box",style:e.loginImg}),e._v(" "),s("div",{staticClass:"login_box"},[e._m(1),e._v(" "),s("div",{staticClass:"col_wrap account_wrap"},[s("Input",{staticClass:"account_input",attrs:{size:"large",placeholder:"请输入帐户名",clearable:""},on:{"on-blur":function(t){return e.inputBlurFn("account")}},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}}),e._v(" "),s("span",{ref:"accountError",staticClass:"error_msg"})],1),e._v(" "),s("div",{staticClass:"col_wrap password_wrap"},[s("Input",{staticClass:"password_input",attrs:{type:"password",size:"large",placeholder:"请输入密码",clearable:""},on:{"on-blur":function(t){return e.inputBlurFn("password")}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("span",{ref:"passwordError",staticClass:"error_msg"})],1),e._v(" "),s("div",{staticClass:"col_wrap verification_wrap"},[s("div",{staticClass:"verification_wrap_top"},[s("div",{staticClass:"left_box"},[s("Input",{staticClass:"verfication_code_input",attrs:{size:"large",placeholder:"验证码",clearable:""},on:{"on-enter":e.handleLoginFn,"on-blur":function(t){return e.inputBlurFn("verification")}},model:{value:e.verification,callback:function(t){e.verification=t},expression:"verification"}})],1),e._v(" "),s("div",{staticClass:"right_box"},[s("h3",{ref:"verfication_view_code",attrs:{onselectstart:"return false"},on:{click:e.updateCodeFn}})])]),e._v(" "),s("span",{ref:"verificationError",staticClass:"error_msg"})]),e._v(" "),s("div",{staticClass:"col_wrap"},[s("Button",{attrs:{shape:"circle",disabled:e.loginDisable,type:"primary",id:"login_btn"},on:{click:e.handleLoginFn}},[e._v("登录")])],1)])])]),e._v(" "),s("div",{staticClass:"footer"})])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"header_box"},[t("img",{attrs:{src:s("dLd/"),alt:""}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col_wrap title_wrap"},[t("h1",[this._v("医疗资产追踪管理系统")])])}]};var u=s("VU/8")(c,l,!1,function(e){s("eKdo")},"data-v-23ea0f89",null);t.default=u.exports},eKdo:function(e,t){},npKG:function(e,t,s){e.exports=s.p+"public/static/img/login_bg.8197232.jpg"}});