webpackJsonp([34],{"1kSq":function(t,e){},URdx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),r=a("2nDa"),n=a("/qMM"),o=a("p8P9"),c=a("wdqF"),l=a("EMb8"),u=a("8sRp"),p=a("KxKW"),d=a("JtJ0"),h=a("X2sI"),_=a("LuSo"),m=a("NAz/"),v=a("a84E"),f=a("7+uW"),D=a("wDsp");f.a.component("Row",v.a),f.a.component("Col",m.a),f.a.component("Select",_.a),f.a.component("Option",h.a),f.a.component("Input",d.a),f.a.component("Button",p.a),f.a.component("Modal",u.a),f.a.component("Icon",l.a),f.a.component("Spin",c.a),f.a.component("AutoComplete",o.a),f.a.component("CheckboxGroup",n.a),f.a.component("Checkbox",r.a);var C={name:"account_create",components:{},props:{},data:function(){return{authorityArr:[{code:"1",text:"资产首页"},{code:"2",text:"资产管理"},{code:"3",text:"设备管理"},{code:"4",text:"温湿度管理"},{code:"5",text:"电子围栏"},{code:"6",text:"维修/报废/调用"},{code:"7",text:"盘点管理"},{code:"8",text:"网关管理"},{code:"9",text:"账户管理"}],inputData:[],inputDataAll:[],createData:{data:{username:"",password:"",phone:"",departmentroom:"",role:"",locDept:""},verify:{username:!1,password:!1,phone:!1,departmentroom:!1,role:!1,locDept:!1},text:{username:"请输入4-8位字符，可以包含中文/字母/数字",password:"请输入6-20位密码",phone:"",departmentroom:"",role:"管理员拥有资产删除权限，操作员没有",locDept:""},warning:{username:!1,password:!1,phone:!1,departmentroom:!1,role:!1,locDept:!1}},uploadModal:!1,achieveUpload:!1,errorUpload:!1,passwordVerify:!1,phoneVerify:!1,roleData:[{value:"admin",label:"管理员"},{value:"operator",label:"操作员"}]}},watch:{},computed:{},methods:{handleSearchFn:function(t){this.inputData=this.inputDataAll.filter(function(e){return e.toLowerCase().indexOf(t.toLowerCase())>-1})},inputBlurFn:function(){this.inputDataAll=[],this.inputData=[]},inputFocusFn:function(t){var e=this;this.inputDataAll=[],this.inputData=[];var a=[],i={};i[t]="1",a.push(i),this.$axios.post(D.a.inputQuery,a).then(function(a){a.data.data.forEach(function(a,i){e.inputDataAll.find(function(e){return e===a[t]})||e.inputDataAll.push(a[t])}),setTimeout(function(){e.inputData=JSON.parse(s()(e.inputDataAll))},300)}).catch(function(t){console.log(t)})},inputFocus:function(t){t.target.removeAttribute("readonly")},inputBlur:function(t){t.target.setAttribute("readonly",!0)},inputErrorFn:function(t,e){t.test(this.createData[e])?(this.$refs[e+"_error"].classList.add("hide"),this[e+"Verify"]=!0):(this.$refs[e+"_error"].classList.remove("hide"),this[e+"Verify"]=!1)},inputBlurCheckFn:function(t,e){t=t;var a=e,i="",s=!1;if("username"===e)if(""===this[t].data.username.trim())i="账户名不能为空！",s=!0,this[t].verify[a]=!1;else{/^[(a-zA-Z0-9\u4e00-\u9fa5){1}_#]{4,8}$/.test(this[t].data.username.trim())?(i="",s=!1,this[t].verify[a]=!0):(i="请输入正确格式的账户名！",s=!0,this[t].verify[a]=!1)}else if("phone"===e)if(""===this[t].data.phone.trim())i="手机号不能为空！",s=!0,this[t].verify[a]=!1;else{/^1[3456789]\d{9}$/.test(this[t].data.phone.trim())?(i="",s=!1,this[t].verify[a]=!0):(i="请输入正确格式的手机号！",s=!0,this[t].verify[a]=!1)}else if("password"===e)if(""===this[t].data.password.trim())i="密码不能为空！",s=!0,this[t].verify[a]=!1;else{/^(\w){6,20}$/.test(this[t].data.password.trim())?(i="",s=!1,this[t].verify[a]=!0):(i="请输入6-20位密码",s=!0,this[t].verify[a]=!1)}else"departmentroom"===e?""===this[t].data.departmentroom.trim()?(i="部门名称不能为空！",s=!0,this[t].verify[a]=!1):(i="",s=!1,this[t].verify[a]=!0):"locDept"===e?""===this[t].data.locDept.trim()?(i="所在科室名称不能为空！",s=!0,this[t].verify[a]=!1):(i="",s=!1,this[t].verify[a]=!0):"role"===e&&(""===this[t].data.role.trim()?(i="账户级别不能为空！",s=!0,this[t].verify[a]=!1):(i="",s=!1,this[t].verify[a]=!0));this[t].text[a]=i,this[t].warning[a]=!!s},successFn:function(){var t=this;this.achieveUpload=!0,setTimeout(function(){t.uploadModal=!1,setTimeout(function(){t.achieveUpload=!1,t.errorUpload=!1,t.$router.go(-1)},500)},1e3)},errorFn:function(){var t=this;this.errorUpload=!0,setTimeout(function(){t.uploadModal=!1,setTimeout(function(){t.achieveUpload=!1,t.errorUpload=!1},500)},1e3)},createFn:function(){var t=this;this.inputBlurCheckFn("createData","username"),this.inputBlurCheckFn("createData","phone"),this.inputBlurCheckFn("createData","password"),this.inputBlurCheckFn("createData","departmentroom"),this.inputBlurCheckFn("createData","locDept"),this.inputBlurCheckFn("createData","role");var e=0;for(var a in this.createData.verify)this.createData.verify[a]||e++;if(e)this.$Message.error({content:"请填写完整账户信息！",duration:1});else{var i={username:this.createData.data.username.trim(),password:this.createData.data.password.trim(),phone:this.createData.data.phone.trim(),departmentroom:this.createData.data.departmentroom.trim(),role:this.createData.data.role.trim(),locDept:this.createData.data.locDept.trim()};this.uploadModal=!0,this.$axios.post(D.a.accountCreate,i).then(function(e){"ok"===e.data.msg?t.successFn():"failed"===e.data.msg&&t.errorFn()}).catch(function(e){t.$Message.error({content:"创建用户失败！",duration:1})})}}},created:function(){},mounted:function(){}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account_create_wrap"},[a("div",{staticClass:"hover_animat custom_bg_color_white"},[a("div",{staticClass:"row_box"},[a("h2",{staticClass:"row_title"},[t._v("账户新增")]),t._v(" "),a("div",{staticClass:"form_wrap_veritical"},[a("div",{staticClass:"input_item clearfix"},[t._m(0),t._v(" "),a("div",{staticClass:"input_item_center"},[a("Input",{staticStyle:{width:"200px"},attrs:{readonly:"",placeholder:"账户名"},on:{"on-focus":t.inputFocus,"on-blur":function(e){return t.inputBlurCheckFn("createData","username")}},model:{value:t.createData.data.username,callback:function(e){t.$set(t.createData.data,"username",e)},expression:"createData.data.username"}})],1),t._v(" "),a("div",{staticClass:"input_item_right"},[a("span",{ref:"notice_username"}),t._v(" "),a("span",{class:t.createData.warning.username?"error_msg":""},[t._v(t._s(t.createData.text.username))])])]),t._v(" "),a("div",{staticClass:"input_item clearfix"},[t._m(1),t._v(" "),a("div",{staticClass:"input_item_center"},[a("Input",{staticStyle:{width:"200px"},attrs:{readonly:"",type:"password",placeholder:"密码"},on:{"on-focus":t.inputFocus,"on-blur":function(e){return t.inputBlurCheckFn("createData","password")}},model:{value:t.createData.data.password,callback:function(e){t.$set(t.createData.data,"password",e)},expression:"createData.data.password"}})],1),t._v(" "),a("div",{staticClass:"input_item_right"},[a("span",{class:t.createData.warning.password?"error_msg":""},[t._v(t._s(t.createData.text.password))])])]),t._v(" "),a("div",{staticClass:"input_item clearfix"},[t._m(2),t._v(" "),a("div",{staticClass:"input_item_center"},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"手机号"},on:{"on-blur":function(e){return t.inputBlurCheckFn("createData","phone")}},model:{value:t.createData.data.phone,callback:function(e){t.$set(t.createData.data,"phone",e)},expression:"createData.data.phone"}})],1),t._v(" "),a("div",{staticClass:"input_item_right"},[a("span",{class:t.createData.warning.phone?"error_msg":""},[t._v(t._s(t.createData.text.phone))])])]),t._v(" "),a("div",{staticClass:"input_item clearfix"},[t._m(3),t._v(" "),a("div",{staticClass:"input_item_center"},[a("AutoComplete",{staticStyle:{width:"200px"},attrs:{placeholder:"部门名称"},on:{"on-focus":function(e){return t.inputFocusFn("departmentroom")},"on-blur":t.inputBlurFn,"on-search":t.handleSearchFn},model:{value:t.createData.data.departmentroom,callback:function(e){t.$set(t.createData.data,"departmentroom",e)},expression:"createData.data.departmentroom"}},t._l(t.inputData,function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)],1),t._v(" "),a("div",{staticClass:"input_item_right"},[a("span",{class:t.createData.warning.departmentroom?"error_msg":""},[t._v(t._s(t.createData.text.departmentroom))])])]),t._v(" "),a("div",{staticClass:"input_item clearfix"},[t._m(4),t._v(" "),a("div",{staticClass:"input_item_center"},[a("AutoComplete",{staticStyle:{width:"200px"},attrs:{placeholder:"所在科室名称"},on:{"on-focus":function(e){return t.inputFocusFn("locDept")},"on-blur":t.inputBlurFn,"on-search":t.handleSearchFn},model:{value:t.createData.data.locDept,callback:function(e){t.$set(t.createData.data,"locDept",e)},expression:"createData.data.locDept"}},t._l(t.inputData,function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)],1),t._v(" "),a("div",{staticClass:"input_item_right"},[a("span",{class:t.createData.warning.locDept?"error_msg":""},[t._v(t._s(t.createData.text.locDept))])])]),t._v(" "),a("div",{staticClass:"input_item clearfix"},[t._m(5),t._v(" "),a("div",{staticClass:"input_item_center"},[a("Select",{staticStyle:{width:"200px"},on:{"on-change":function(e){return t.inputBlurCheckFn("createData","role")}},model:{value:t.createData.data.role,callback:function(e){t.$set(t.createData.data,"role",e)},expression:"createData.data.role"}},t._l(t.roleData,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),a("div",{staticClass:"input_item_right"},[a("span",{class:t.createData.warning.role?"error_msg":""},[t._v(t._s(t.createData.text.role))])])])]),t._v(" "),a("div",{staticClass:"submit_btn_wrap left"},[a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:t.createFn}},[t._v("确定新增")])],1)])]),t._v(" "),a("Modal",{attrs:{title:"","footer-hide":!0,"mask-closable":!1,closable:!1,width:"360"},model:{value:t.uploadModal,callback:function(e){t.uploadModal=e},expression:"uploadModal"}},[a("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[t.achieveUpload||t.errorUpload?t._e():a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"loding_icon",attrs:{type:"ios-loading",size:"18"}}),t._v(" "),a("div",[t._v("正在保存")])],1),t._v(" "),t.achieveUpload?a("Spin",{staticStyle:{color:"#00ad19"},attrs:{fix:""}},[a("Icon",{attrs:{type:"ios-checkmark-circle",size:"18"}}),t._v(" "),a("div",[t._v("保存成功")])],1):t._e(),t._v(" "),t.errorUpload?a("Spin",{staticStyle:{color:"#f72b2b"},attrs:{fix:""}},[a("Icon",{attrs:{type:"ios-close-circle",size:"18"}}),t._v(" "),a("div",[t._v("保存失败")])],1):t._e()],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_item_left"},[e("h5",[this._v("账户名")]),this._v(" "),e("span",{staticClass:"must_fill_info"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_item_left"},[e("h5",[this._v("密码")]),this._v(" "),e("span",{staticClass:"must_fill_info"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_item_left"},[e("h5",[this._v("手机号")]),this._v(" "),e("span",{staticClass:"must_fill_info"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_item_left"},[e("h5",[this._v("部门名称")]),this._v(" "),e("span",{staticClass:"must_fill_info"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_item_left"},[e("h5",[this._v("所在科室名称")]),this._v(" "),e("span",{staticClass:"must_fill_info"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_item_left"},[e("h5",[this._v("账户级别")]),this._v(" "),e("span",{staticClass:"must_fill_info"},[this._v("*")])])}]};var w=a("VU/8")(C,x,!1,function(t){a("1kSq")},"data-v-466c61b4",null);e.default=w.exports}});