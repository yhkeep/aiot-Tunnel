webpackJsonp([45],{"6nJB":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("mvHQ"),o=e.n(s),i=e("Fd2+"),n=(e("jgNZ"),e("dKGA"),e("FDxC"),e("2PSJ"),e("uTM9"),e("9ULi"),e("jydU"),e("wvM5"),e("tLo2"),e("Rv11"),e("Nf3R"),e("wDsp")),l=e("ao6w"),r=e("eJLk"),c={name:"mobile_assets_manage",components:{Button:i.b,Row:i.w,Col:i.g,Tag:i.z,Loading:i.o,Search:i.x,Icon:i.m,Field:i.l,Popup:i.u,Picker:i.s,Popover:i.t},props:{},data:function(){return{inputData:[],inputDataAll:[],inputSearchValue:"",activeKey:"",showInputSearch:!1,statusColor:r.a,isFirstEnter:!0,currentPage:1,totalCount:0,hasMore:!0,assetsDetailData:[],loadingShow:!0,queryData:{assetID:"",assetName:"",memorydepart:"",memorylocDept:"",mac:"",status:""},queryDataNow:{},value:"",showSearchPane:!1,statusDialogShow:!1,statusData:l.a,showPopover:!1,actions:[{text:"资产新增",icon:"plus"}]}},watch:{mobileScroll:function(){var t=this.mobileScroll;t>54?this.$refs.mobileSearchBoxFixed.classList.add("show"):0===t&&this.$refs.mobileSearchBoxFixed.classList.remove("show")}},computed:{mobileScroll:function(){return this.$store.state.mobileScroll}},methods:{onSelect:function(t){switch(t.text){case"资产新增":this.toCreateFn()}},showMoreMenuFn:function(){this.$emit("getMessage",!0)},openSearchPaneFn:function(){this.showSearchPane=!0},toDetailFn:function(t,a){this.$router.push({path:"/mobile/assets_detail/"+t.assetID})},toCreateFn:function(){this.$router.push({path:"/mobile/assets_create"})},searchFn:function(){this.queryDataNow=JSON.parse(o()(this.queryData)),this.currentPage=1,this.assetsDetailData=[],this.getDataFn(),this.showSearchPane=!1},clearAssetsFn:function(){for(var t in this.queryData)this.queryData[t]=""},getStatusFn:function(t){this.queryData.status=t.text,this.statusDialogShow=!1},certainSelectFn:function(t){"departmentroom"===this.activeKey?this.queryData.memorydepart=t:"locDept"===this.activeKey?this.queryData.memorylocDept=t:this.queryData[this.activeKey]=t,this.showInputSearch=!1,this.inputSearchValue="",this.activeKey=""},showInputSearchFn:function(t){this.showInputSearch=!0,this.activeKey=t,this.inputFocusFn(t)},handleSearchFn:function(t){this.inputData=this.inputDataAll.filter(function(a){return a.toLowerCase().indexOf(t.toLowerCase())>-1})},inputFocusFn:function(t){var a=this;this.inputDataAll=[],this.inputData=[];var e=[],s={};s[t]="1",e.push(s),this.$axios.post(n.a.inputQuery,e).then(function(e){e.data.data.forEach(function(e,s){a.inputDataAll.find(function(a){return a===e[t]})||a.inputDataAll.push(e[t])}),a.inputData=JSON.parse(o()(a.inputDataAll))}).catch(function(t){console.log(t)})},getDataFn:function(){var t=this;this.loadingShow=!0;var a="";for(var e in this.queryDataNow)this.queryDataNow[e]||(this.queryDataNow[e]=""),a+=e+"="+this.queryDataNow[e].trim()+"&";a=a.substring(0,a.length-1),this.$axios.post(n.a.assetsQuery+"?currentPage="+this.currentPage+"&"+a).then(function(a){for(var e=a.data,s=Number(e.pop().total),o=0;o<e.length;o++){for(var i in e[o])""!==e[o][i]&&"null"!==e[o][i]||(e[o][i]="--");t.assetsDetailData.push(e[o])}s<=t.assetsDetailData.length?t.hasMore=!1:t.hasMore=!0,t.totalCount=s,t.loadingShow=!1}).catch(function(t){})},getMoreFn:function(){this.currentPage+=1,this.getDataFn()},initAllDataFn:function(){this.loadingKey=!0,this.currentPage=1,this.totalCount=0,this.hasMore=!0,this.assetsDetailData=[],this.queryData={assetID:"",assetName:"",memorydepart:"",memorylocDept:"",mac:"",status:""},this.queryDataNow={}},getSearchConfigFn:function(){this.queryDataNow=JSON.parse(o()(this.queryData)),this.getDataFn()}},beforeRouteEnter:function(t,a,e){t.meta.isBack=!0,e()},beforeRouteLeave:function(t,a,e){window.sessionStorage.setItem("mobileScroll",this.mobileScroll),e()},created:function(){this.isFirstEnter=!0},mounted:function(){},activated:function(){this.showPopover=!1;var t=window.sessionStorage.getItem("mobileScroll");document.getElementById("mobile_wrap").scrollTop=t,this.$route.meta.isBack&&!this.isFirstEnter||(this.initAllDataFn(),this.getSearchConfigFn()),this.$route.meta.isBack=!1,this.isFirstEnter=!1},deactivated:function(){this.showPopover=!1}},u={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mobile_assets_manage_wrap manage_list_wrap custom_flex_column_wrap"},[e("div",{staticClass:"mobile_search_wrap"},[e("div",{ref:"mobileSearchBoxFixed",staticClass:"mobile_search_box"},[e("div",{staticClass:"mobile_search_box_left"},[e("Search",{attrs:{disabled:"",placeholder:"点击展开搜索面板",shape:"round"},on:{click:t.openSearchPaneFn},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}})],1),t._v(" "),e("div",{staticClass:"mobile_search_box_right"},[e("div",{staticClass:"mobile_search_box_right_tools",staticStyle:{width:"40px"}},[e("Popover",{attrs:{trigger:"click",actions:t.actions,placement:"bottom-end",theme:"dark"},on:{select:t.onSelect},scopedSlots:t._u([{key:"reference",fn:function(){return[e("Icon",{attrs:{name:"add-o"}})]},proxy:!0}]),model:{value:t.showPopover,callback:function(a){t.showPopover=a},expression:"showPopover"}})],1),t._v(" "),e("div",{staticClass:"mobile_search_box_right_tools",staticStyle:{width:"40px"}},[e("Icon",{attrs:{name:"bars"},on:{click:t.showMoreMenuFn}})],1)])])]),t._v(" "),e("div",{staticClass:"assets_table_wrap"},[e("div",{staticClass:"assets_table_wrap_content  clearfix"},[e("div",{staticClass:"assets_table_wrap_left"},[e("ul",{staticClass:"assets_table_ul"},[t._m(0),t._v(" "),t._l(t.assetsDetailData,function(a,s){return e("li",{key:s,staticClass:"assets_table_li"},[e("div",{staticClass:"assets_table_item"},[e("p",[t._v(t._s(s+1))])])])})],2)]),t._v(" "),e("div",{staticClass:"assets_table_wrap_right"},[e("ul",{staticClass:"assets_table_ul"},[t._m(1),t._v(" "),t._l(t.assetsDetailData,function(a,s){return e("li",{key:s,staticClass:"assets_table_li clearfix",on:{click:function(e){return t.toDetailFn(a,s)}}},[e("div",{staticClass:"assets_table_item"},[e("p",[t._v(t._s(a.assetID?a.assetID:"--"))])]),t._v(" "),e("div",{staticClass:"assets_table_item"},[e("p",[t._v(t._s(a.assetName?a.assetName:"--"))])]),t._v(" "),e("div",{staticClass:"assets_table_item"},[e("p",[t._v(t._s(a.locDept?a.locDept:"--"))])]),t._v(" "),e("div",{staticClass:"assets_table_item"},[e("p",[t._v(t._s(a.location?a.location:"--"))])]),t._v(" "),e("div",{staticClass:"assets_table_item"},[e("p",[t._v(t._s(a.mac?a.mac:"--"))])]),t._v(" "),e("div",{staticClass:"assets_table_item"},["正常"===a.status?e("Tag",{attrs:{size:"medium",color:t.statusColor[0]}},[t._v(t._s(a.status))]):"待维修"===a.status?e("Tag",{attrs:{size:"medium",color:t.statusColor[1]}},[t._v(t._s(a.status))]):"维修接单"===a.status?e("Tag",{attrs:{size:"medium",color:t.statusColor[2]}},[t._v(t._s(a.status))]):"待报废"===a.status?e("Tag",{attrs:{size:"medium",color:t.statusColor[3]}},[t._v(t._s(a.status))]):"报废"===a.status?e("Tag",{attrs:{size:"medium",color:t.statusColor[4]}},[t._v(t._s(a.status))]):"外借"===a.status?e("Tag",{attrs:{size:"medium",color:t.statusColor[5]}},[t._v(t._s(a.status))]):e("Tag",{attrs:{size:"medium",color:"#f7f7f7","text-color":"#515a6e"}},[t._v(t._s(a.status))])],1)])})],2)])]),t._v(" "),e("div",{staticClass:"loading_info_wrap"},[e("Button",{directives:[{name:"show",rawName:"v-show",value:!t.loadingShow,expression:"!loadingShow"}],staticStyle:{border:"none"},attrs:{disabled:!t.hasMore},on:{click:t.getMoreFn}},[t._v(t._s(!0===t.hasMore?"点击加载更多":"已无更多数据"))]),t._v(" "),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loadingShow,expression:"loadingShow"}],attrs:{size:"24px"}},[t._v("加载中...")])],1)]),t._v(" "),e("Popup",{attrs:{position:"top",round:""},model:{value:t.showSearchPane,callback:function(a){t.showSearchPane=a},expression:"showSearchPane"}},[e("div",{staticClass:"query_data_wrap"},[e("div",{staticClass:"query_data_box"},[e("Field",{attrs:{clearable:"",label:"资产编号",placeholder:"请输入资产编号"},model:{value:t.queryData.assetID,callback:function(a){t.$set(t.queryData,"assetID",a)},expression:"queryData.assetID"}}),t._v(" "),e("Field",{attrs:{clearable:"",label:"资产名称",center:"",placeholder:"请输入资产名称"},scopedSlots:t._u([{key:"button",fn:function(){return[e("Button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.showInputSearchFn("assetName")}}},[t._v("云数据")])]},proxy:!0}]),model:{value:t.queryData.assetName,callback:function(a){t.$set(t.queryData,"assetName",a)},expression:"queryData.assetName"}}),t._v(" "),e("Field",{attrs:{clearable:"",label:"部门名称",center:"",placeholder:"请输入部门名称"},scopedSlots:t._u([{key:"button",fn:function(){return[e("Button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.showInputSearchFn("departmentroom")}}},[t._v("云数据")])]},proxy:!0}]),model:{value:t.queryData.memorydepart,callback:function(a){t.$set(t.queryData,"memorydepart",a)},expression:"queryData.memorydepart"}}),t._v(" "),e("Field",{attrs:{clearable:"",label:"所在科室",center:"",placeholder:"请输入所在科室"},scopedSlots:t._u([{key:"button",fn:function(){return[e("Button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.showInputSearchFn("locDept")}}},[t._v("云数据")])]},proxy:!0}]),model:{value:t.queryData.memorylocDept,callback:function(a){t.$set(t.queryData,"memorylocDept",a)},expression:"queryData.memorylocDept"}}),t._v(" "),e("Field",{attrs:{clearable:"",label:"标签mac",placeholder:"请输入标签mac"},model:{value:t.queryData.mac,callback:function(a){t.$set(t.queryData,"mac",a)},expression:"queryData.mac"}}),t._v(" "),e("Field",{attrs:{readonly:"",label:"状态",placeholder:"请选择状态"},on:{click:function(a){t.statusDialogShow=!0}},model:{value:t.queryData.status,callback:function(a){t.$set(t.queryData,"status",a)},expression:"queryData.status"}})],1),t._v(" "),e("div",{staticClass:"tools_button_wrap"},[e("Button",{staticClass:"tools_button",attrs:{color:"linear-gradient(to right, #ff6034, #ee0a24)",round:""},on:{click:t.clearAssetsFn}},[t._v("清空")]),t._v(" "),e("Button",{staticClass:"tools_button",attrs:{color:"linear-gradient(to right, #69aff5, #1989fa)",round:""},on:{click:t.searchFn}},[t._v("搜索")])],1)])]),t._v(" "),e("Popup",{attrs:{position:"bottom"},model:{value:t.statusDialogShow,callback:function(a){t.statusDialogShow=a},expression:"statusDialogShow"}},[e("Picker",{attrs:{columns:t.statusData,"show-toolbar":"",title:"请选择状态","visible-item-count":5},on:{cancel:function(a){t.statusDialogShow=!1},confirm:t.getStatusFn}})],1),t._v(" "),e("Popup",{attrs:{position:"bottom"},model:{value:t.showInputSearch,callback:function(a){t.showInputSearch=a},expression:"showInputSearch"}},[e("Search",{attrs:{placeholder:"请输入搜索关键词","input-align":"center"},on:{input:t.handleSearchFn},model:{value:t.inputSearchValue,callback:function(a){t.inputSearchValue=a},expression:"inputSearchValue"}}),t._v(" "),e("Picker",{ref:"inputSelect",attrs:{"show-toolbar":"","toolbar-position":"bottom",columns:t.inputData,title:"","visible-item-count":5},on:{cancel:function(a){t.showInputSearch=!1},confirm:t.certainSelectFn}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"assets_table_li assets_table_li_name"},[a("div",{staticClass:"assets_table_item"},[a("p",[this._v("序号")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",{staticClass:"assets_table_li assets_table_li_name clearfix"},[e("div",{staticClass:"assets_table_item"},[e("p",[t._v("资产编号")])]),t._v(" "),e("div",{staticClass:"assets_table_item"},[e("p",[t._v("资产名称")])]),t._v(" "),e("div",{staticClass:"assets_table_item"},[e("p",[t._v("科室名称")])]),t._v(" "),e("div",{staticClass:"assets_table_item"},[e("p",[t._v("存放地点")])]),t._v(" "),e("div",{staticClass:"assets_table_item"},[e("p",[t._v("标签mac")])]),t._v(" "),e("div",{staticClass:"assets_table_item"},[e("p",[t._v("状态")])])])}]};var h=e("VU/8")(c,u,!1,function(t){e("lCuO")},"data-v-038f5e7d",null);a.default=h.exports},lCuO:function(t,a){}});