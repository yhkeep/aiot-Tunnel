webpackJsonp([25],{HMy3:function(t,e){},URdx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("mvHQ"),r=a.n(o),i=a("2nDa"),s=a("/qMM"),c=a("p8P9"),n=a("wdqF"),d=a("EMb8"),u=a("8sRp"),l=a("KxKW"),h=a("JtJ0"),p=a("X2sI"),m=a("LuSo"),x=a("NAz/"),_=a("a84E"),v=a("7+uW"),f=a("wDsp");v.a.component("Row",_.a),v.a.component("Col",x.a),v.a.component("Select",m.a),v.a.component("Option",p.a),v.a.component("Input",h.a),v.a.component("Button",l.a),v.a.component("Modal",u.a),v.a.component("Icon",d.a),v.a.component("Spin",n.a),v.a.component("AutoComplete",c.a),v.a.component("CheckboxGroup",s.a),v.a.component("Checkbox",i.a);var y={name:"account_create",components:{},props:{},data:function(){return{authorityArr:[{code:1,text:"资产首页",children:[{code:"/huaxi/assetManagement/param",text:"资产查询"},{code:"/websocket",text:"设备动态数据"},{code:"/huaxi/statement",text:"资产统计数据"},{code:"/user/update",text:"账号密码修改"}]},{code:2,text:"资产管理",children:[{code:"/huaxi/assetManagement/param",text:"资产查询"},{code:"/huaxi/upload",text:"资产新增"},{code:"/huaxi/del",text:"资产删除"},{code:"/huaxi/update",text:"资产更新"},{code:"/huaxi/poi/export",text:"导出资产表"},{code:"/uploadimage",text:"资产图片上传"},{code:"/showImage",text:"显示设备正面图片"},{code:"/showImageLeft",text:"显示设备左面图片"},{code:"/showImageRight",text:"显示设备右面图片"},{code:"/showImageAbove",text:"显示设备顶面图片"},{code:"/showImageAllround",text:"显示设备背面图片"},{code:"/showImagePaperlabel",text:"显示设备铭牌图片"},{code:"/showImageOnecodelable",text:"显示资产标签图片"},{code:"/huaxi/assetmarked",text:"资产数据模糊查询"},{code:"/user/update",text:"账号密码修改"}]},{code:3,text:"设备管理",children:[{code:"/huaxi/assertChecked",text:"资产盘点"},{code:"/map/websocket",text:"地图定位数据"},{code:"/huaxi/getGateway",text:"网关查询"},{code:"/user/update",text:"账号密码修改"}]},{code:4,text:"温湿度管理",children:[{code:"/luzhou/hum",text:"温湿度查询"},{code:"/luzhou/daySummary",text:"温湿度图表数据"},{code:"/luzhou/assetManagement/param",text:"温湿度历史数据"},{code:"/luzhou/section",text:"温湿度编辑数据"},{code:"/luzhou/edit",text:"温湿度编辑更新数据"},{code:"/huaxi/addHumiture",text:"温湿度仪器新增"},{code:"/huaxi/delHumiture",text:"温湿度仪器删除"},{code:"/hum/websocket",text:"温湿度明细数据"},{code:"/hum/warn/websocket",text:"温湿度告警数据"},{code:"/user/update",text:"账号密码修改"},{code:"/huaxi/hygrothermograph/export",text:"温湿度导出"}]},{code:5,text:"电子围栏",children:[{code:"/websocket",text:"设备动态数据"},{code:"/user/update",text:"账号密码修改"}]},{code:6,text:"维修/报废/调用",children:[{code:"/huaxi/assetmarked",text:"资产数据模糊查询"},{code:"/huaxi/assetManagement/param",text:"资产查询"},{code:"/maintainhistory/uploadimage",text:"维修登记"},{code:"/lendouthistory/uploadimage",text:"外借登记"},{code:"/maintainhistory/query",text:"维修/外借历史"},{code:"/user/update",text:"账号密码修改"}]},{code:7,text:"盘点管理",children:[{code:"/huaxi/assetmarked",text:"资产数据模糊查询"},{code:"/huaxi/assetManagement/param",text:"资产查询"},{code:"/map/websocket",text:"地图定位数据"},{code:"/huaxi/assertChecked",text:"资产盘点"},{code:"/huaxi/assertChecked/History",text:"资产盘点历史"},{code:"/huaxi/assertCheckedDetail",text:"资产盘点明细"},{code:"/user/update",text:"账号密码修改"}]},{code:8,text:"网关管理",children:[{code:"/huaxi/editGateway",text:"保存网关配置"},{code:"/huaxi/updateGateway",text:"网关参数更新"},{code:"/huaxi/deleteGateway",text:"网关删除"},{code:"/huaxi/addGateway",text:"网关新增"},{code:"/huaxi/gateway",text:"重启指定网关"},{code:"/huaxi/allGateway",text:"重启所有网关"},{code:"/huaxi/getGateway",text:"网关查询"},{code:"/user/update",text:"账号密码修改"}]},{code:9,text:"账户管理",children:[{code:"/huaxi/user/query",text:"账号查询"},{code:"/huaxi/user/del",text:"账号删除"},{code:"/huaxi/user/add",text:"账号创建"},{code:"/huaxi/departmentType",text:"授权部门权限"},{code:"/user/update",text:"账号密码修改"}]}],rolePathArr:[{code:"/huaxi/assetmarked",text:"资产数据模糊查询"},{code:"/huaxi/assetManagement/param",text:"资产查询"},{code:"/huaxi/statement",text:"资产统计数据"},{code:"/huaxi/upload",text:"资产新增"},{code:"/huaxi/del",text:"资产删除"},{code:"/huaxi/update",text:"资产更新"},{code:"/huaxi/poi/export",text:"导出资产表"},{code:"/uploadimage",text:"资产图片上传"},{code:"/showImage",text:"显示设备正面图片"},{code:"/showImageLeft",text:"显示设备左面图片"},{code:"/showImageRight",text:"显示设备右面图片"},{code:"/showImageAbove",text:"显示设备顶面图片"},{code:"/showImageAllround",text:"显示设备背面图片"},{code:"/showImagePaperlabel",text:"显示设备铭牌图片"},{code:"/showImageOnecodelable",text:"显示资产标签图片"},{code:"/websocket",text:"设备动态数据"},{code:"/huaxi/editGateway",text:"保存网关配置"},{code:"/huaxi/updateGateway",text:"网关参数更新"},{code:"/huaxi/deleteGateway",text:"网关删除"},{code:"/huaxi/addGateway",text:"网关新增"},{code:"/huaxi/gateway",text:"重启指定网关"},{code:"/huaxi/allGateway",text:"重启所有网关"},{code:"/huaxi/getGateway",text:"网关查询"},{code:"/huaxi/user/query",text:"账号查询"},{code:"/huaxi/user/del",text:"账号删除"},{code:"/huaxi/user/add",text:"账号创建"},{code:"/map/websocket",text:"地图定位数据"},{code:"/user/update",text:"账号密码修改"},{code:"/luzhou/hum",text:"温湿度查询"},{code:"/luzhou/daySummary",text:"温湿度图表数据"},{code:"/luzhou/assetManagement/param",text:"温湿度历史数据"},{code:"/luzhou/section",text:"温湿度编辑数据"},{code:"/luzhou/edit",text:"温湿度编辑更新数据"},{code:"/huaxi/addHumiture",text:"温湿度仪器新增"},{code:"/huaxi/delHumiture",text:"温湿度仪器删除"},{code:"/hum/websocket",text:"温湿度明细数据"},{code:"/hum/warn/websocket",text:"温湿度告警数据"},{code:"/huaxi/assertChecked",text:"资产盘点"},{code:"/huaxi/assertChecked/History",text:"资产盘点历史"},{code:"/huaxi/assertCheckedDetail",text:"资产盘点明细"},{code:"/maintainhistory/uploadimage",text:"维修登记"},{code:"/lendouthistory/uploadimage",text:"外借登记"},{code:"/maintainhistory/query",text:"维修/外借历史"},{code:"/huaxi/departmentType",text:"授权部门权限"}],departmentroomArr:[],createData:{data:{username:"",password:"",phone:"",departmentroom:[],role:"",authority:[],rolepath:[]},verify:{username:!1,password:!1,departmentroom:!1,role:!1},text:{username:"请输入4-8位字符，可以包含中文/字母/数字",password:"请输入6-20位密码",departmentroom:"",role:"管理员拥有资产删除权限，操作员没有"},warning:{username:!1,password:!1,departmentroom:!1,role:!1}},uploadModal:!1,achieveUpload:!1,errorUpload:!1,passwordVerify:!1,phoneVerify:!1,roleData:[{value:"admin",label:"管理员"},{value:"operator",label:"操作员"}]}},watch:{},computed:{},methods:{inputFocus:function(t){t.target.removeAttribute("readonly")},inputBlur:function(t){t.target.setAttribute("readonly",!0)},inputErrorFn:function(t,e){t.test(this.createData[e])?(this.$refs[e+"_error"].classList.add("hide"),this[e+"Verify"]=!0):(this.$refs[e+"_error"].classList.remove("hide"),this[e+"Verify"]=!1)},inputBlurCheckFn:function(t,e){t=t;var a=e,o="",r=!1;if("username"===e)if(""===this[t].data.username.trim())o="账户名不能为空！",r=!0,this[t].verify[a]=!1;else{/^[(a-zA-Z0-9\u4e00-\u9fa5){1}_#]{4,8}$/.test(this[t].data.username.trim())?(o="",r=!1,this[t].verify[a]=!0):(o="请输入正确格式的账户名！",r=!0,this[t].verify[a]=!1)}else if("password"===e)if(""===this[t].data.password.trim())o="密码不能为空！",r=!0,this[t].verify[a]=!1;else{/^(\w){6,20}$/.test(this[t].data.password.trim())?(o="",r=!1,this[t].verify[a]=!0):(o="请输入6-20位密码",r=!0,this[t].verify[a]=!1)}else"departmentroom"===e?this[t].data.departmentroom.length<=0?(o="可授权部门至少需要一个",r=!0,this[t].verify[a]=!1):(o="",r=!1,this[t].verify[a]=!0):"role"===e&&(""===this[t].data.role.trim()?(o="账户级别不能为空！",r=!0,this[t].verify[a]=!1):(o="",r=!1,this[t].verify[a]=!0));this[t].text[a]=o,this[t].warning[a]=!!r},successFn:function(){var t=this;this.achieveUpload=!0,setTimeout(function(){t.uploadModal=!1,setTimeout(function(){t.achieveUpload=!1,t.errorUpload=!1,t.$router.go(-1)},500)},1e3)},errorFn:function(){var t=this;this.errorUpload=!0,setTimeout(function(){t.uploadModal=!1,setTimeout(function(){t.achieveUpload=!1,t.errorUpload=!1},500)},1e3)},createFn:function(){var t=this;this.inputBlurCheckFn("createData","username"),this.inputBlurCheckFn("createData","password"),this.inputBlurCheckFn("createData","departmentroom"),this.inputBlurCheckFn("createData","role");var e=0;for(var a in this.createData.verify)this.createData.verify[a]||e++;e?this.$Message.error({content:"请填写完整账户信息！",duration:1}):this.createData.data.authority.length?function(){for(var e=[],a=function(a){t.authorityArr.forEach(function(o,r){t.createData.data.authority[a]===o.code&&o.children.forEach(function(t,a){e.find(function(e){return e===t.code})||e.push(t.code)})})},o=0;o<t.createData.data.authority.length;o++)a(o);var i={username:t.createData.data.username.trim(),password:t.createData.data.password.trim(),phone:t.createData.data.phone.trim(),departmentroom:t.createData.data.departmentroom.join(","),role:t.createData.data.role.trim(),authority:r()(t.createData.data.authority),rolepath:e.join(",")};t.uploadModal=!0,t.$axios.post(f.a.accountCreate,i).then(function(e){0===e.data.code?t.successFn():(t.errorFn(),t.$Message.error({content:e.data.msg,duration:2}))}).catch(function(e){t.$Message.error({content:"创建用户失败！",duration:1})})}():this.$Message.error({content:"模块权限至少需要一个",duration:1})},getDepartmentRoomFn:function(){var t=this;this.$axios.post(f.a.departmentList,{address:"1"}).then(function(e){var a=[];e.data.data.forEach(function(t,e){a.push({value:t.departmentroom,label:t.departmentroom})}),t.departmentroomArr=a}).catch(function(t){console.log(t)})}},created:function(){this.getDepartmentRoomFn()},mounted:function(){}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account_create_wrap"},[a("div",{staticClass:"hover_animat custom_bg_color_white"},[a("div",{staticClass:"row_box"},[a("h2",{staticClass:"row_title"},[t._v("账户新增")]),t._v(" "),a("div",{staticClass:"form_wrap_veritical"},[a("div",{staticClass:"input_item clearfix"},[t._m(0),t._v(" "),a("div",{staticClass:"input_item_center"},[a("Input",{staticStyle:{width:"200px"},attrs:{readonly:"",placeholder:"账户名"},on:{"on-focus":t.inputFocus,"on-blur":function(e){return t.inputBlurCheckFn("createData","username")}},model:{value:t.createData.data.username,callback:function(e){t.$set(t.createData.data,"username",e)},expression:"createData.data.username"}})],1),t._v(" "),a("div",{staticClass:"input_item_right"},[a("span",{ref:"notice_username"}),t._v(" "),a("span",{class:t.createData.warning.username?"error_msg":""},[t._v(t._s(t.createData.text.username))])])]),t._v(" "),a("div",{staticClass:"input_item clearfix"},[t._m(1),t._v(" "),a("div",{staticClass:"input_item_center"},[a("Input",{staticStyle:{width:"200px"},attrs:{readonly:"",type:"password",placeholder:"密码"},on:{"on-focus":t.inputFocus,"on-blur":function(e){return t.inputBlurCheckFn("createData","password")}},model:{value:t.createData.data.password,callback:function(e){t.$set(t.createData.data,"password",e)},expression:"createData.data.password"}})],1),t._v(" "),a("div",{staticClass:"input_item_right"},[a("span",{class:t.createData.warning.password?"error_msg":""},[t._v(t._s(t.createData.text.password))])])]),t._v(" "),a("div",{staticClass:"input_item clearfix"},[t._m(2),t._v(" "),a("div",{staticClass:"input_item_center"},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"手机号"},model:{value:t.createData.data.phone,callback:function(e){t.$set(t.createData.data,"phone",e)},expression:"createData.data.phone"}})],1),t._v(" "),a("div",{staticClass:"input_item_right"})]),t._v(" "),a("div",{staticClass:"input_item clearfix",staticStyle:{height:"auto"}},[t._m(3),t._v(" "),a("div",{staticClass:"input_item_center"},[a("Select",{staticStyle:{"min-width":"200px"},attrs:{filterable:"",multiple:"",placeholder:"可多选"},model:{value:t.createData.data.departmentroom,callback:function(e){t.$set(t.createData.data,"departmentroom",e)},expression:"createData.data.departmentroom"}},t._l(t.departmentroomArr,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),a("div",{staticClass:"input_item_right"},[a("span",{class:t.createData.warning.departmentroom?"error_msg":""},[t._v(t._s(t.createData.text.departmentroom))])])]),t._v(" "),a("div",{staticClass:"input_item clearfix"},[t._m(4),t._v(" "),a("div",{staticClass:"input_item_center"},[a("Select",{staticStyle:{width:"200px"},on:{"on-change":function(e){return t.inputBlurCheckFn("createData","role")}},model:{value:t.createData.data.role,callback:function(e){t.$set(t.createData.data,"role",e)},expression:"createData.data.role"}},t._l(t.roleData,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),a("div",{staticClass:"input_item_right"},[a("span",{class:t.createData.warning.role?"error_msg":""},[t._v(t._s(t.createData.text.role))])])]),t._v(" "),a("div",{staticClass:"check_item"},[t._m(5),t._v(" "),a("div",{staticClass:"check_item_right"},[a("CheckboxGroup",{model:{value:t.createData.data.authority,callback:function(e){t.$set(t.createData.data,"authority",e)},expression:"createData.data.authority"}},t._l(t.authorityArr,function(e,o){return a("Checkbox",{key:o,attrs:{label:e.code}},[a("span",[t._v(t._s(e.text))])])}),1)],1)])]),t._v(" "),a("div",{staticClass:"submit_btn_wrap left"},[a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:t.createFn}},[t._v("确定新增")])],1)])]),t._v(" "),a("Modal",{attrs:{title:"","footer-hide":!0,"mask-closable":!1,closable:!1,width:"360"},model:{value:t.uploadModal,callback:function(e){t.uploadModal=e},expression:"uploadModal"}},[a("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[t.achieveUpload||t.errorUpload?t._e():a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"loding_icon",attrs:{type:"ios-loading",size:"18"}}),t._v(" "),a("div",[t._v("正在保存")])],1),t._v(" "),t.achieveUpload?a("Spin",{staticStyle:{color:"#00ad19"},attrs:{fix:""}},[a("Icon",{attrs:{type:"ios-checkmark-circle",size:"18"}}),t._v(" "),a("div",[t._v("保存成功")])],1):t._e(),t._v(" "),t.errorUpload?a("Spin",{staticStyle:{color:"#f72b2b"},attrs:{fix:""}},[a("Icon",{attrs:{type:"ios-close-circle",size:"18"}}),t._v(" "),a("div",[t._v("保存失败")])],1):t._e()],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_item_left"},[e("h5",[this._v("账户名")]),this._v(" "),e("span",{staticClass:"must_fill_info"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_item_left"},[e("h5",[this._v("密码")]),this._v(" "),e("span",{staticClass:"must_fill_info"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_item_left"},[e("h5",[this._v("手机号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_item_left"},[e("h5",[this._v("可授权部门")]),this._v(" "),e("span",{staticClass:"must_fill_info"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_item_left"},[e("h5",[this._v("账户级别")]),this._v(" "),e("span",{staticClass:"must_fill_info"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"check_item_left"},[e("h5",[this._v("模块权限")])])}]};var g=a("VU/8")(y,w,!1,function(t){a("HMy3")},"data-v-94b28986",null);e.default=g.exports}});